#LyX 2.3 created this file. For more info see http://www.lyx.org/
\lyxformat 544
\begin_document
\begin_header
\save_transient_properties true
\origin unavailable
\textclass scrbook
\begin_preamble
% DO NOT ALTER THIS PREAMBLE!!!
%
% This preamble is designed to ensure that the User's Guide prints
% out as advertised. If you mess with this preamble,
% parts of the User's Guide may not print out as expected.  If you
% have problems LaTeXing this file, please contact
% the documentation team
% email: lyx-docs@lists.lyx.org

\usepackage{ifpdf} % part of the hyperref bundle
\ifpdf % if pdflatex is used

 % set fonts for nicer pdf view
 \IfFileExists{lmodern.sty}{\usepackage{lmodern}}{}

\fi % end if pdflatex is used

% for correct jump positions whe clicking on a link to a float
\usepackage[figure]{hypcap}

% the pages of the TOC is numbered roman
% and a pdf-bookmark for the TOC is added
\let\myTOC\tableofcontents
\renewcommand\tableofcontents{%
  \frontmatter
  \pdfbookmark[1]{\contentsname}{}
  \myTOC
  \mainmatter }

% define a short command for \textvisiblespace
\newcommand{\spce}{\textvisiblespace}

% macro for italic page numbers in the index
\newcommand{\IndexDef}[1]{\textit{#1}}

% for customized page headers/footers
% only needed because they are only used in one section of the document
\usepackage{fancyhdr}
% change header rule width
\renewcommand{\headrulewidth}{2pt}

% workaround for a makeindex bug,
% see sec. "Index Entry Order"
% only uncomment this when you are using makindex
%\let\OrgIndex\index
%\renewcommand*{\index}[1]{\OrgIndex{#1}}
\usepackage{dcolumn}
\usepackage{breakurl}
\end_preamble
\options refpage,intoc,bibliography=totoc,index=totoc,BCOR7.5mm,captions=tableheading
\use_default_options false
\begin_modules
customHeadersFooters
enumitem
hanging
\end_modules
\maintain_unincluded_children false
\language english
\language_package default
\inputencoding auto
\fontencoding global
\font_roman "default" "default"
\font_sans "default" "default"
\font_typewriter "default" "default"
\font_math "auto" "auto"
\font_default_family default
\use_non_tex_fonts false
\font_sc false
\font_osf false
\font_sf_scale 100 100
\font_tt_scale 100 100
\use_microtype false
\use_dash_ligatures true
\graphics default
\default_output_format default
\output_sync 0
\bibtex_command default
\index_command default
\paperfontsize 12
\spacing single
\use_hyperref true
\pdf_title "The WDPM User's Guide"
\pdf_author "Shook et al. (2020)"
\pdf_subject "WDPM"
\pdf_keywords "WDPM"
\pdf_bookmarks true
\pdf_bookmarksnumbered true
\pdf_bookmarksopen false
\pdf_bookmarksopenlevel 1
\pdf_breaklinks false
\pdf_pdfborder false
\pdf_colorlinks true
\pdf_backref false
\pdf_pdfusetitle false
\pdf_quoted_options "linkcolor=black, citecolor=black, urlcolor=blue, filecolor=blue, pdfpagelayout=OneColumn, pdfnewwindow=true, pdfstartview=XYZ, plainpages=false"
\papersize default
\use_geometry false
\use_package amsmath 1
\use_package amssymb 1
\use_package cancel 1
\use_package esint 1
\use_package mathdots 1
\use_package mathtools 1
\use_package mhchem 1
\use_package stackrel 1
\use_package stmaryrd 1
\use_package undertilde 1
\cite_engine natbib
\cite_engine_type authoryear
\biblio_style plainnat
\use_bibtopic false
\use_indices false
\paperorientation portrait
\suppress_date false
\justification true
\use_refstyle 0
\use_minted 0
\notefontcolor #0000ff
\branch Question
\selected 1
\filename_suffix 0
\color #00ff00
\end_branch
\branch Answer
\selected 0
\filename_suffix 0
\color #aa55ff
\end_branch
\index Index
\shortcut idx
\color #008000
\end_index
\secnumdepth 3
\tocdepth 2
\paragraph_separation indent
\paragraph_indentation default
\is_math_indent 0
\math_numbering_side default
\quotes_style english
\dynamic_quotes 0
\papercolumns 1
\papersides 2
\paperpagestyle default
\listings_params "basicstyle={\ttfamily},columns=fullflexible"
\tracking_changes false
\output_changes false
\html_math_output 0
\html_css_as_file 0
\html_be_strict true
\end_header

\begin_body

\begin_layout Title
The WDPM User's Guide
\end_layout

\begin_layout Subtitle
Version 2.0
\end_layout

\begin_layout Author

\size large
Kevin Shook, Robert Armstrong, Oluwaseun Sharomi,
\begin_inset Newline newline
\end_inset

Raymond J. Spiteri, John Pomeroy, Tonghe Liu
\end_layout

\begin_layout Standard
Copyright © 2014, 2020 Kevin Shook, Robert Armstrong, Oluwaseun Sharomi,
 Raymond J. Spiteri, John Pomeroy, Tonghe Liu.
 Permission is granted to copy, distribute and/or modify this document under
 the terms of the GNU Free Documentation License, Version 1.3 or any later
 version published by the Free Software Foundation; with no Invariant Sections,
 no Front-Cover Texts, and no Back-Cover Texts.
 A copy of the license is included in the section entitled "GNU Free Documentati
on License".
\end_layout

\begin_layout Standard
\begin_inset CommandInset toc
LatexCommand tableofcontents

\end_inset


\end_layout

\begin_layout Chapter
Introduction
\end_layout

\begin_layout Section
What is the WDPM?
\end_layout

\begin_layout Standard
The Wetland DEM Ponding Model (WDPM) was developed by the Centre for Hydrology
 at the University of Saskatchewan to model the distribution of runoff water
 on the Canadian Prairies.
 The program was originally written in Fortran 95 by Kevin Shook in 2008.
 Because the program requires many thousands of iterations to converge,
 it was adapted to CPU parallel processing in 2010 using the OpenMP API
 (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://openmp.org/)
\end_layout

\end_inset

.
 This version was used operationally by the LIRA project, as described in
 Section
\begin_inset CommandInset ref
LatexCommand vref
reference "chap:Case-study:-the"

\end_inset

.
\end_layout

\begin_layout Standard
In version 1.0, the program was made faster and easier to use.
 The WDPM code was ported from Fortran to C, and a graphical user interface
 was added by Oluwaseun Sharomi and Ray Spiteri of the Department of Computer
 Science at the University of Saskatchewan.
 At the same time, the parallel processing was changed to OpenCL
\begin_inset Index idx
status open

\begin_layout Plain Layout
OpenCL
\end_layout

\end_inset

 (
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.khronos.org/opencl/)
\end_layout

\end_inset

), which has been found to be faster, and which supports the use of Graphical
 Processing Units (GPUs).
 Funding for the recoding of the WDPM was provided by Agriculture and Agri-Food
 Canada (AAFC)
\begin_inset Index idx
status open

\begin_layout Plain Layout
Agriculture and Agri-Food Canada (AAFC)
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
In version 2.0, the GUI code was converted from Python 2 to Python 3 by Tongue
 Liu, and Ray Spiteri of the Department of Computer Science at the University
 of Saskatchewan.
 Many bugs were fixed, and the program execution speed was improved by adding
 a user-selectable water zero threshold depth, as described in section
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Zero-threshold-depth"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Section
Licence
\end_layout

\begin_layout Standard
The WDPM is distributed under the GPL version 3.
 The licence is listed in full in Section
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand vref
reference "chap:Appendix"

\end_inset

.
\end_layout

\begin_layout Standard
THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE
 LAW.
 EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER
 PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER
 EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH
 YOU.
 SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY
 SERVICING, REPAIR OR CORRECTION.
\end_layout

\begin_layout Standard
IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL
 ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE
 PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
 GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
 USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS
 OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR
 THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
 EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY
 OF SUCH DAMAGES.
\end_layout

\begin_layout Section
What does the WDPM do?
\end_layout

\begin_layout Standard
The purpose of the WDPM is to model the spatial distribution of runoff water
 on the Canadian Prairies.
 Because of its recent post-glacial history, the Canadian Prairies do not
 have a conventional drainage system.
 When excess water runs off the landscape, generally due to snow melt in
 the spring, it may trapped in surface depressions ranging in size from
 puddles to permanent wetlands, and may cause local flooding.
 If the depressions are full of water, they may connect.
\end_layout

\begin_layout Standard
The WDPM was developed to model the spatial distribution of water over a
 Prairie landscape, as represented by a Digital Elevation Model (DEM).
 Originally, the purpose of the program was to determine the fractions of
 Prairie basins contributing flows to streams, as these change dynamically
 with the storage of water in the depressions
\begin_inset CommandInset citation
LatexCommand citep
key "shook2011,shook2013"
literal "true"

\end_inset

.
 However, the model has also been used to demonstrate the extent of flooding
 on Prairie landscapes, which may be useful for operational purposes.
\end_layout

\begin_layout Section
Program support
\end_layout

\begin_layout Standard
No support is provided for the use of this program.
 If you discover bugs, please contact the authors though the GitHub repository
 described on page
\begin_inset CommandInset ref
LatexCommand vpageref
reference "chap:Installing-the-WDPM"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Section
Citing the WDPM
\end_layout

\begin_layout Standard
A paper describing the WDPM is currently being submitted to the Journal
 of Open Source Software.
 Until this paper is published, please cite
\begin_inset CommandInset citation
LatexCommand citet
key "shook2013"
literal "false"

\end_inset

 to refer to use of the WDPM in any publications.
\end_layout

\begin_layout Section
Program limitations
\end_layout

\begin_layout Standard
The WDPM is NOT a hydrological model.
 It does NOT determine the depths of water applied to or removed from the
 DEM.
 The Centre for Hydrology at the University of Saskatchewan has developed
 the Cold Regions Hydrological modelling (CRHM) platform
\begin_inset CommandInset citation
LatexCommand citep
key "pomeroy2007"
literal "true"

\end_inset

 which is capable of modelling the unique hydrological processes of the
 Canadian Prairies.
 It is possible to use CRHM's modeled runoff and evaporation fluxes as inputs
 to the WDPM.
\end_layout

\begin_layout Standard
The WDPM is NOT a hydraulic model.
 It CANNOT be used to model the rate of flow in any type of channel.
 It does not have a time step.
 FLUXOS-OVERFLOW is a 2-D hydrodynamic model capable of modelling overland
 flow rates in the Canadian Prairies
\begin_inset CommandInset citation
LatexCommand citep
key "costa2020"
literal "false"

\end_inset

 but is much slower than WDPM to execute and requires more forcing data.
\end_layout

\begin_layout Standard
The WDPM requires a DEM to execute, and all DEMs are imperfect representations
 of reality.
 Some of the problems with using common DEMs with the WDPM in the Prairies
 are discussed in Section
\begin_inset CommandInset ref
LatexCommand vref
reference "sec:DEM-data"

\end_inset

.
 It is important to note that the WDPM only operates at elevations

\shape italic
above
\shape default
 the elevations of the water present when the DEM was constructed.
\end_layout

\begin_layout Standard
In the Canadian Prairies, the road network
\begin_inset Index idx
status open

\begin_layout Plain Layout
roads in DEMs
\end_layout

\end_inset

 prevents the WDPM from accurately distributing runoff.
 To allow the water to be distributed properly, it is necessary to breach
 the roads in the DEM where there are culverts and bridges
\begin_inset CommandInset citation
LatexCommand citep
key "lindsay2016"
literal "false"

\end_inset

.
\end_layout

\begin_layout Section
Model inputs and outputs
\end_layout

\begin_layout Standard
All the DEM and water data file inputs
\begin_inset Index idx
status open

\begin_layout Plain Layout
program input and output files
\end_layout

\end_inset

 and outputs are ArcGIS ASCII (.asc) files.
 It is assumed that the user has access to a geographical information system
 (GIS) program.
 For more information, see Section
\begin_inset CommandInset ref
LatexCommand vref
reference "subsec:Visualizing-the-output"

\end_inset

.
 The files used as inputs or outputs are listed in Table
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Files-used-as"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Files used as inputs and outputs for the WDPM.
\begin_inset CommandInset label
LatexCommand label
name "tab:Files-used-as"

\end_inset


\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="9" columns="4">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Name
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Description
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Input/Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Mandatory?
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DEM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Surface elevations
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Input
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water depths
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Input
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water depths
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Yes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scratch
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water depths
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
temp.asc
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water depths
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Both
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
report.txt
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Program messages
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
.png
\family default
 file
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Water image
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
colormap_black.txt
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Color map
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Input
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
No
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
The Water file is specified to change an existing set of water elevations,
 i.e.
 to add more water, remove water, or to drain the water.
 If the DEM initially contains no water, then the file name is set to NULL.
 Note that the water file name MUST be specified for the Subtract or Drain
 modules to be used.
\end_layout

\begin_layout Standard
The Output file contains the depths of water after the execution of the
 program.
 Once the file has been created, it can be used in another run, by specifying
 it as the Water file.
\end_layout

\begin_layout Standard
The Scratch file is similar to the output file, except that it is output
 every 1000 iterations, and it overwrites the previous version.
 The purpose of the Scratch file is to allow you to stop the program and
 to re-start it again.
 In this case, you would specify the previous Scratch file as the Water
 file in the new run.
 If the Scratch file is not used, the file name is set to NULL.
\end_layout

\begin_layout Standard
The file
\family typewriter
temp.asc
\family default
 is created automatically and is used to improve performance.
 The file is only created after the first 1000 iterations.
 It is automatically deleted after the end of the run.
\end_layout

\begin_layout Standard
In addition to the .asc files, all model messages that are written to the
 screen are also logged to the file
\family typewriter
report.txt
\family default
.
 The model is also capable of reading the run parameters from a text file
 as described in Section
\begin_inset CommandInset ref
LatexCommand vref
reference "subsec:Text-files"

\end_inset

.
\end_layout

\begin_layout Standard
The WDPM can create a simple image of the water output, using the open-source
 program
\series bold
gdaldem
\series default

\begin_inset Index idx
status open

\begin_layout Plain Layout
gdaldem
\end_layout

\end_inset

, which is part of the GDAL suite of programs
\begin_inset CommandInset citation
LatexCommand citep
key "gdal2020"
literal "false"

\end_inset

.
 This is not intended to be a substitute for a GIS program, but it does provide
 the ability to create an image of the water surface as a .png file.
 The program requires a file called
\family typewriter
colormap_black.txt
\family default
 which must be in the same directory as the WDPM executable file.
 The structure of the colour map file is explained in Section
\begin_inset CommandInset ref
LatexCommand vref
reference "subsec:Visualizing-the-output"

\end_inset

.
\end_layout

\begin_layout Section
Modules
\end_layout

\begin_layout Standard
The WDPM applies simulated water to a digital elevation model of a Prairie
 basin using three modules: Add, Subtract, and Drain.
\end_layout

\begin_layout Subsection
Add
\end_layout

\begin_layout Standard
This module adds a specified depth of water to the basin.
 If the DEM is dry prior to the addition of water, a file created containing
 the water depths for each cell of the DEM.
 If there is an existing water file, then the specified depth of water is
 added to the existing water, and the total is redistributed.
 This module is intended to (roughly) simulate the addition of excess water
 to depressional storage by runoff from snowmelt or intense precipitation.
 To simulate the effects of infiltration of precipitation/snowmelt to soil,
 the addition of water allows the use of a runoff fraction
\begin_inset Index idx
status open

\begin_layout Plain Layout
runoff fraction
\end_layout

\end_inset

 (0-1) on the water that is applied to directly to land.
 The runoff fraction is not used on the water applied to existing water.
\end_layout

\begin_layout Standard
The addition of water can be slow, particularly if a very fine tolerance
 is used.
 If the basin is to be drained, then it is not necessary to use a fine tolerance
, as the water will be redistributed while being drained.
\end_layout

\begin_layout Standard
If a stream exists in the DEM, then the Add module will route water to the
 stream channel.
 However, because of the way that the algorithm works, the edges of the
 DEM acts as dams, preventing any the water from leaving the DEM.
 This causes the modeled stream to 'back up' over the landscape as shown
 in Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water-1"

\end_inset

.
 This example applied 100 mm of water, with a runoff fraction of 1, an elevation
 tolerance of 1 mm, and a zero depth threshold of 0.005 mm.
 The meanings of these parameters is explained in section
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Module-parameters"
plural "false"
caps "false"
noprefix "false"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename 100_0_0_0_u.png
	width 8cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
100mm of water added.
\begin_inset CommandInset label
LatexCommand label
name "fig:100mm-of-water-1"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Subtract
\end_layout

\begin_layout Standard
This module subtracts a specified depth of water from each DEM cell to represent
 evaporation.
 No spatial variability is in the evaporation is currently allowed.
 This module may executes quickly if little spatial redistribution of water
 is required.
 Figure
\begin_inset space ~
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water-50-removed"

\end_inset

 shows the removal of 100 mm of water from the water file created from the
 addition of 200 mm, using an elevation tolerance of 1 mm and a zero depth
 threshold of 0.005 mm.
 Note that it is possible to subtract a greater depth of water than was
 added as the Add module applies water to the entire DEM, whereas the Subtract
 module only removes water from storage in depressions.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename 100_200_0_0_u.png
	width 8cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
100mm of water added, 50mm removed.
\begin_inset CommandInset label
LatexCommand label
name "fig:100mm-of-water-50-removed"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Drain
\end_layout

\begin_layout Standard
This module drains the water on the DEM through the lowest point, assuming
 that this point is in the drainage system.
 This module can be the slowest to execute (depending on the resolution
 and the convergence parameters) because it moves large volumes of water long
 distances.
 The purpose of the Drain module is to eliminate the 'backing up' of water
 over the DEM.
 Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand vref
reference "fig:100mm-of-water"

\end_inset

 shows the draining of the water resulting from the addition of 100 mm,
 using an elevation tolerance of 1 mm a volume tolerance of 10 m
\begin_inset script superscript

\begin_layout Plain Layout
3
\end_layout

\end_inset

, and a zero depth threshold of 0.005 mm.
 Note that the stream is now essentially dry.
 If your DEM does not include a stream (as is true of many landscapes on
 the Canadian Prairies, then you may not need to run the Drain module.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename 100_0_0_0_d.png
	width 8cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
100mm of water applied, then drained
\begin_inset CommandInset label
LatexCommand label
name "fig:100mm-of-water"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
The modules may be executed in varying order.
 For example, it may be desired to add water, to simulate spring runoff,
 followed by draining, and then to remove water to simulate evaporation.
 This could be followed by the addition of water to simulate summer rainfall.
 As was demonstrated by
\begin_inset CommandInset citation
LatexCommand citet
key "shook2013"
literal "true"

\end_inset

, the addition and removal of water are non-reversible.
 Each process affects the spatial distribution of water differently.
\end_layout

\begin_layout Section
Algorithm
\end_layout

\begin_layout Standard
The redistribution algorithm of the WDPM, which is used by all three modules,
 is taken from
\begin_inset CommandInset citation
LatexCommand cite
key "shapiro"
literal "true"

\end_inset

.
 The algorithm and its implementation in the WDPM are described in
\begin_inset CommandInset citation
LatexCommand citet
key "shook2011"
literal "true"

\end_inset

 and
\begin_inset CommandInset citation
LatexCommand citet
key "shook2013"
literal "true"

\end_inset

.
 Unlike the D8 direction of drainage algorithm used by programs such as
 TOPAZ
\begin_inset CommandInset citation
LatexCommand citet
key "garbrecht1007"
literal "true"

\end_inset

, the Shipiro and Westervelt (SW) algorithm allows drainage in more than
 one direction, as shown in Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:D8-and-Shapiro"

\end_inset

.
 Most importantly, the SW algorithm actually moves simulated water over
 the landscape.
 When water is added, it runs into surface depressions.
 When water is removed, the water levels in the depressions are reduced.
 Therefore, the WDPM does not require the DEM to be processed to remove
 pits before it is used.
 It also means that the landscape drainage changes dynamically as water
 is added or removed.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename WDPM_drainage.png
	width 8cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
D8 and Shapiro and Westervelt algorithms
\begin_inset CommandInset label
LatexCommand label
name "fig:D8-and-Shapiro"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Unlike D8 drainage, the SW algorithm is iterative.
 The algorithm is applied to each element in the DEM as shown in the schematic
 diagram in Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Schematic-side-view"

\end_inset

.
 Each is compared separately to its 8 neighbours, looking at the water surface
 elevation.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\align center
\begin_inset Graphics
	filename WaterFlowDiagram.png
	width 5cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Schematic side view of the Shapiro and Westervelt water distribution algorithm.
\begin_inset CommandInset label
LatexCommand label
name "fig:Schematic-side-view"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
Each iteration consists of selecting each cell in the DEM, one at a time,
 and applying Algorithm
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:Pseudocode-for-Shapiro"

\end_inset

 to the selected cell and its neighbours.
\end_layout

\begin_layout Standard
\begin_inset Float algorithm
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

if water surface elevation of selected cell > that of the neighbour cell
\end_layout

\begin_layout Plain Layout

  if selected cell DEM elevation > neighbour cell DEM then
\end_layout

\begin_layout Plain Layout

    move one-eighth of the water in the selected cell to neighbour cell
\end_layout

\begin_layout Plain Layout

  else
\end_layout

\begin_layout Plain Layout

    move one-eighth of the difference in water elevation to neighbour
 cell
\end_layout

\begin_layout Plain Layout

  end if
\end_layout

\begin_layout Plain Layout

end if
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Pseudocode for Shapiro and Westervelt algorithm as implemented by the WDPM.
\begin_inset CommandInset label
LatexCommand label
name "alg:Pseudocode-for-Shapiro"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
At each iteration the algorithm is imperfect because the depth of water transferred
 may be result in an inaccurate representation of the final water surface.
 However, over many thousands of iterations, the movement of water does
 result in a realistic water surface, where the local water elevation is
 constrained by the landscape.
 The termination of the algorithm occurs when the change in the water surface
 between successive iterations is smaller than the specified tolerance.

\end_layout

\begin_layout Section
Parallelization
\end_layout

\begin_layout Standard
The WDPM can be run as a conventional serial program, where one instruction
 at a time is executed, or it can be run in parallel, where multiple instructions are executed
 simultaneously by multiple processors.
 The parallel processing uses the OpenCL
\begin_inset Index idx
status open

\begin_layout Plain Layout
OpenCL
\end_layout

\end_inset

 API.
\end_layout

\begin_layout Standard
The original WDPM Fortran code employed an algorithm that subdivided the
 water matrix into mutually exclusive sub-matrices, with each sub-matrix being
 assigned to a separate process.
 The sub-matrices were separated by two columns to avoid concurrent writes.
 Although this algorithm is every effective with OpenMP, it created inefficiencies
 for OpenCL.
\end_layout

\begin_layout Standard
Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Schematic-diagram-of"

\end_inset

 illustrates the matrix decomposition used in the OpenMP version of the
 WDPM code.
 The colours in the figure represent how the data were split among available
 processors.
 In this case, all nodes with the same colour are processed by the same
 processor in serial (one after the other), but they are also processed in parallel (simultaneously)
 with nodes of other colours in the different regions but in the same
 position of the other sub-matrices.
\end_layout

\begin_layout Standard
The Fortran 95 code that processes the nodes is given in Algorithm
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:Original-WDPM-Fortran"

\end_inset

.
 The matrix that holds the water depths is called 'bigwater' because it is
 one array cell larger on each edge than the water matrix to avoid having
 to check the boundaries.
 Similarly, the matrix that holds the DEM is called 'bigdem' because it is also
 one array cell larger on each edge than the original DEM.
 The code first processes the sub-matrices (referred to as 'slices').
 When all slices have been finished, the code then processes the regions
 in-between the 'slices', which are referred to as 'boundaries'.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename opencl5.png
	width 15cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Schematic diagram of array decomposition used by OpenMP version of the WDPM.
\begin_inset CommandInset label
LatexCommand label
name "fig:Schematic-diagram-of"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
lstparams "breaklines=true,language=Fortran"
inline false
status open

\begin_layout Plain Layout

! do a set of iterations and then test for convergence
\end_layout

\begin_layout Plain Layout

starttime = omp_get_wtime()
\end_layout

\begin_layout Plain Layout

do while (.not.(done))
\end_layout

\begin_layout Plain Layout

  oldwater = bigwater
\end_layout

\begin_layout Plain Layout

  do i = 1,1000
\end_layout

\begin_layout Plain Layout

  call omp_set_num_threads(numslices)
\end_layout

\begin_layout Plain Layout

  !$OMP PARALLEL
\end_layout

\begin_layout Plain Layout

    do row = 2, numrows+1
\end_layout

\begin_layout Plain Layout

      do col = startcols(1 + omp_get_thread_num()), endcols(1 + omp_get_thread_n
um())
\end_layout

\begin_layout Plain Layout

        if (bigwater(row,col) > 0.0 .and.
 (bigdem(row,col) > missingvalue)) then
\end_layout

\begin_layout Plain Layout

          call runoff(row, col)
\end_layout

\begin_layout Plain Layout

        end if
\end_layout

\begin_layout Plain Layout

      end do        ! columns
\end_layout

\begin_layout Plain Layout

    end do          ! rows
\end_layout

\begin_layout Plain Layout

  !$OMP END PARALLEL
\end_layout

\begin_layout Plain Layout

  !$OMP BARRIER
\end_layout

\begin_layout Plain Layout

  ! do spaces between slices
\end_layout

\begin_layout Plain Layout

    if (numslices > 1) then
\end_layout

\begin_layout Plain Layout

    call omp_set_num_threads(numboundaries)
\end_layout

\begin_layout Plain Layout

    !$OMP PARALLEL
\end_layout

\begin_layout Plain Layout

      do row = 2, numrows+1
\end_layout

\begin_layout Plain Layout

        do col = boundarystartcols(1 + omp_get_thread_num()), boundaryendcols(1
 + omp_get_thread_num())
\end_layout

\begin_layout Plain Layout

  ! add check for all cells missing
\end_layout

\begin_layout Plain Layout

          if (bigwater(row,col) > 0.0 .and.
 (bigdem(row,col) > missingvalue)) then
\end_layout

\begin_layout Plain Layout

            call runoff(row, col)
\end_layout

\begin_layout Plain Layout

          end if
\end_layout

\begin_layout Plain Layout

        end do        ! columns
\end_layout

\begin_layout Plain Layout

      end do          ! rows
\end_layout

\begin_layout Plain Layout

    !$OMP END PARALLEL
\end_layout

\begin_layout Plain Layout

    end if
\end_layout

\begin_layout Plain Layout

  end do  ! 1000 iterations
\end_layout

\begin_layout Plain Layout

  k = k + 1000
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Original WDPM Fortran code using OpenMP.
\begin_inset CommandInset label
LatexCommand label
name "alg:Original-WDPM-Fortran"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
OpenCL (Open Computing Language) is the first open, free standard for cross-plat
form, parallel programming of modern processors found in personal computers,
 servers, and handheld/embedded devices.
 OpenCL greatly improves speed and responsiveness for a wide spectrum of
 applications in many categories.
 The problem caused by directly implementing the Fortran OpenMP algorithm in OpenCL is that the
 data transfers required led to significant inefficiencies.
 Accordingly, the implementation of the Shapiro and Westervelt algorithm was changed
 by noting that the goal is to process all the nodes without creating race conditions, i.e., concurrent
 writing to the same point in the matrix.
 The entire matrix was divided into 9 slices such that race conditions are
 not present.

\end_layout

\begin_layout Standard
Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Subdivision-of-the"

\end_inset

 illustrates the slices used by the OpenCL version of the WDPM, in which
 every node with the same colour is processed individually by a unique thread.
 The OpenCl code consists of two pieces, the host and the kernel.
 The host code sits on the CPU and send instructions to the devices that
 do the parallel processing.
 The C code of the Shapiro and Westervelt algorithm host is shown in Algorithm

\begin_inset CommandInset ref
LatexCommand ref
reference "alg:OpenCL-host-C"

\end_inset

.
 The kernel code is executed in parallel by each of the available devices
 (CPU or GPU).
 The C code of the Shapiro and Westervelt algorithm kernel is shown in
 Algorithm
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:OpenCL-kernel-C"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Float figure
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename opencl4.png
	width 15cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Subdivision of the matrix used by the OpenCL version of the WDPM.
\begin_inset CommandInset label
LatexCommand label
name "fig:Subdivision-of-the"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
lstparams "breaklines=true,language=C"
inline false
status open

\begin_layout Plain Layout

for (i=0; i<1000; i++){
\end_layout

\begin_layout Plain Layout

   for(oi=1; oi<4; oi++){
\end_layout

\begin_layout Plain Layout

	for(oj=1; oj<4; oj++){
\end_layout

\begin_layout Plain Layout

	    err = clSetKernelArg(kernel, 6, sizeof(int), (void *)&oi);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "set kernel argument oi");
\end_layout

\begin_layout Plain Layout

	    err = clSetKernelArg(kernel, 7, sizeof(int), (void *)&oj);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "set kernel argument oj");
\end_layout

\begin_layout Plain Layout

	    err=clEnqueueNDRangeKernel(queue,kernel,2,NULL,global,NULL,0,NULL,&event);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "enqueue kernel");
\end_layout

\begin_layout Plain Layout

	    // wait for kernel, this forces execution
\end_layout

\begin_layout Plain Layout

	    err = clWaitForEvents(1, &event);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "wait for enqueue kernel");
\end_layout

\begin_layout Plain Layout

	    clReleaseEvent(event);
\end_layout

\begin_layout Plain Layout

	  }
\end_layout

\begin_layout Plain Layout

     }
\end_layout

\begin_layout Plain Layout

     err= clEnqueueReadBuffer(queue,d_bigwater,CL_FALSE,0,bytes,bbigwater,0,NULL
, &event);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "read bigwater from device");
\end_layout

\begin_layout Plain Layout

	    err = clWaitForEvents(1, &event);
\end_layout

\begin_layout Plain Layout

	    exitOnFail(err, "wait for read bigwater from device");
\end_layout

\begin_layout Plain Layout

	    // Reshape Flattened Matrix back to 2D array
\end_layout

\begin_layout Plain Layout

	    k = k+1000;
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
WDPM OpenCL host C code.
\begin_inset CommandInset label
LatexCommand label
name "alg:OpenCL-host-C"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float algorithm
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset listings
lstparams "breaklines=true,language=C"
inline false
status open

\begin_layout Plain Layout

__kernel void add(__global double *bigwater, __global double *bigdem, const
 double missingvalue, const int numrows, const int numcols, const int offset,
 const int oi, const int oj){
\end_layout

\begin_layout Plain Layout

	int row, col;
\end_layout

\begin_layout Plain Layout

       int row1 = get_global_id(0);
\end_layout

\begin_layout Plain Layout

       int col1 = get_global_id(1);
\end_layout

\begin_layout Plain Layout

	int off = offset-1;
\end_layout

\begin_layout Plain Layout

       row = (oi-off)+off*row1;
\end_layout

\begin_layout Plain Layout

       col = (oj-off)+off*col1;
\end_layout

\begin_layout Plain Layout

      if (row>=1 && row<=numrows && col>=1 && col<=numcols &&
\end_layout

\begin_layout Plain Layout

	bigwater[row+(numrows+2)*col]>0.0 && bigdem[row+(numrows+2)*col]>missingvalue
 ){
\end_layout

\begin_layout Plain Layout

	runoffadd(bigwater,bigdem,row,col,missingvalue,numrows);
\end_layout

\begin_layout Plain Layout

    }
\end_layout

\begin_layout Plain Layout

}
\end_layout

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
WDPM OpenCL kernel C code.
\begin_inset CommandInset label
LatexCommand label
name "alg:OpenCL-kernel-C"

\end_inset


\end_layout

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Zero threshold depth
\begin_inset CommandInset label
LatexCommand label
name "sec:Zero-threshold-depth"

\end_inset


\begin_inset Index idx
status open

\begin_layout Plain Layout
Zero threshold depth
\end_layout

\end_inset


\end_layout

\begin_layout Standard
In the Fortran 95 version of WDPM, shown in Algorithm
\begin_inset CommandInset ref
LatexCommand ref
reference "alg:Original-WDPM-Fortran"
plural "false"
caps "false"
noprefix "false"

\end_inset

, and in the original C version, the water redistribution is only executed
 if the depth of water in the centre cell is greater than 0.0.
 However, this comparison results in many instances of very small depths
 of water being redistributed.
 To reduce the run time of the program, a threshold depth has been added
 to the program as an additional parameter, as described below.
 Depths of water smaller than the threshold depth are treated as being zero,
 and are therefore not redistributed.
 Note that the use of a threshold depth greater than zero also affects
 the mean depth of water remaining on the DEM, as calculated by the program,
 as well as the calculated volume of water drained from the DEM.
 The effects of the zero depth threshold on the execution time and the water
 distribution.
\end_layout

\begin_layout Section
Potential Issues among DEM datasets for flood hazard mapping
\begin_inset CommandInset label
LatexCommand label
name "sec:DEM-data"

\end_inset


\end_layout

\begin_layout Standard
A brief summary of results is provided here for a recent comparison of WDPM
 runoff maps generated from different digital elevation models (DEMs).
 The analysis was conducted for two Prairie locations, one located in Saskatchewan and the other in Manitoba.
 The DEM data sources included products derived from, Light Detection And
 Ranging (LiDAR), aerial photos, the National Topographic DataBase (NTDB),
 satellite optical stereo-images, and space-borne radar.
 The spatial resolution of DEMs obtained for the analysis ranged from 5
 m to 30 m.
\end_layout

\begin_layout Standard
One site located at Swift Current, SK is characterized by an agricultural
 region surrounding a valley containing Swift Current Creek; relief = 80
 m.
 The second area located west of Winnipeg, MB is an agricultural area that
 contains two narrow drainage channels; relief = 8 m.
 Several gridded DEMs were obtained at both locations for the comparative
 analysis, which included:
\end_layout

\begin_layout Itemize
5 m LiDAR DEMs (Agriculture and Agri-Food Canada)
\end_layout

\begin_layout Itemize
30 m (Saskatchewan) and 20 m (Manitoba)  Ortho-DEMs
\begin_inset Index idx
status open

\begin_layout Plain Layout
Ortho-DEM
\end_layout

\end_inset

 used primarily for the purpose of rectifying orthophotos for a Saskatchewan
 based digital mapping program (source: SGIC group) and also for similar
 mapping in Manitoba
\end_layout

\begin_layout Itemize
30 m Canadian Digital Elevation Data, CDED DEMs
\begin_inset Index idx
status open

\begin_layout Plain Layout
Canadian Digital Elevation Data DEM
\end_layout

\end_inset

 (source: GeoBase)
\end_layout

\begin_layout Itemize
30 m void filled, downscaled DEMs from the Shuttle Radar Topographic Mission.
 Specifically SRTM
\begin_inset Index idx
status open

\begin_layout Plain Layout
SRTM DEM
\end_layout

\end_inset

 V3 (Source: NASA’s Jet Propulsion Laboratory
\shape italic
.

\shape default
 Currently, these data are no longer available online)
\end_layout

\begin_layout Itemize
30 m ASTER
\begin_inset Index idx
status open

\begin_layout Plain Layout
ASTER DEM
\end_layout

\end_inset

 (Advanced Spaceborne Thermal Emission and Reflection Radiometer) Global
 Digital Elevation Model GDEM
\begin_inset Index idx
status open

\begin_layout Plain Layout
GDEM DEM
\end_layout

\end_inset

 and GDEM V2 (Source: NASA’s Jet Propulsion Laboratory)
\end_layout

\begin_layout Standard
Table
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Technical-specifications-of"

\end_inset

 gives a summary of technical specifications for the DEMs as well as potential
 issues encountered when using these types of elevation data for flood hazard
 mapping across entire landscapes.
 This includes issues related to project resources, systematic errors in
 elevation data and land surface representation anomalies.
 Resource issues can be a general limitation simply based on the cost to
 acquire DEM data and the technical skills required to process massive and
 complex datasets, e.g.,
 LiDAR point clouds and DEMs.
 However, systematic data errors and land surface representation issues
 are more critical concerns for generating realistic runoff maps with WDPM.
\end_layout

\begin_layout Standard
Figures
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:SC-Runoff-distributions"

\end_inset

 and
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Winnipeg-Runoff-distributions"

\end_inset

 show examples of WDPM runoff distribution maps generated for the different
 DEMs.
 The maps were derived by applying a uniform water depth of 73 mm to all
 Swift Current DEMs and 116 mm to the Manitoba DEMs.
 Strictly for reference purposes, the different depths applied are equivalent
 to the maximum 24-hour accumulated rainfall totals for the 1:100 year return
 periods at these locations and also serves to highlight differences
 in the local climates.
 Runoff maps are also included for the same water depths applied to the
 5 m LiDAR DEMs for relative comparisons against the “expected” runoff distributions.
\end_layout

\begin_layout Standard
Contrasts among the runoff maps observed in both cases suggest differences
 in DEM technical specifications and terrain representation issues are important
 concerns for flood hazard mapping.
 The resulting maps highlight potential issues such as terrace-like incoherent
 runoff patterns generated on CDED surfaces for both landscapes; these issues are
 attributed to the use of integer storage formats.
 Poorly captured terrain features in past versions of Ortho-DEM based products
 are also a key concern.
 This type of problem is partly due to the subjectivity of capturing relevant
 surface features and systematic issues related to photogrammetric techniques
 used for developing DEMs, i.e.,
 hardware, software, and data formats.
\end_layout

\begin_layout Standard
In more extreme cases, representative land surfaces may even appear nonsensical.
 Figure
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Winnipeg-Runoff-distributions"

\end_inset

 shows an example based on the SRTM runoff map at the Manitoba location.
 This critical issue can be attributed to the difficulties of capturing
 elevation information using space-borne radar or optical techniques over
 areas of low relief or dense vegetation canopies and where limited
 ground control points exist.
 This is also a severe problem for ASTER DEMs versions 1 and 2, both of
 which have been observed to contain large pits in the order of 30 m – 50
 m deep and “mole-run” artifacts that appear as positive curvilinear surface
 features (not shown here).
 Such anomalies can be partly attributed to insufficient scene stacks over
 a particular region.
 In such cases, DEMs for these areas have no practical value for overland
 runoff simulations.

\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Technical specifications of DEMs.
\begin_inset Index idx
status open

\begin_layout Plain Layout
DEM technical specifications
\end_layout

\end_inset


\begin_inset CommandInset label
LatexCommand label
name "tab:Technical-specifications-of"

\end_inset


\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="6" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top" width="2cm">
<column alignment="center" valignment="top" width="2cm">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top" width="2cm">
<column alignment="center" valignment="top" width="3cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
DEM Dataset
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Cell Resolution (m)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Standard Format
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Vertical Accuracy (m)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
General Issues
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
LiDAR
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
real
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
± 0.3 – 0.5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Cost, data volume and correcting drainage connectivity (e.g.,
 for culvert locations)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Ortho - DEM models
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
5 – 30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Integer or real
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
± 1.5
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Autocorrelation / interpolation issues; Subjectivity of ancillary data collectio
n; Adequate capture of road networks
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
CDED
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Varies by source data and location
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Contour artifacts and integer values result in terraced-like landscapes
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
SRTM
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
30 and 90
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Real or Integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
± 12 – 16
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Winter survey, backscatter (e.g.,
 low relief, dense vegetation) and coarseness
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
ASTER
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
30
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
Integer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
± 20
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family roman
\series medium
\shape up
\size normal
\emph off
\bar no
\strikeout off
\uuline off
\uwave off
\noun off
\color none
“Mole runs” and 30-50 m deep pits
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename Runoff distributions for DEMs near Swift Current SK based on 73 mm of water added.png
	width 15cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Runoff distributions for DEMs near Swift Current SK based on 76 mm of water
 added.
\begin_inset CommandInset label
LatexCommand label
name "fig:SC-Runoff-distributions"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename Runoff distributions for DEMs near Winnipeg MB based on 116 mm of water added.png
	width 15cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Runoff distributions for DEMs near Winnipeg MB based on 116 mm of water
 added.
\begin_inset CommandInset label
LatexCommand label
name "fig:Winnipeg-Runoff-distributions"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Chapter
Installing the WDPM
\begin_inset CommandInset label
LatexCommand label
name "chap:Installing-the-WDPM"

\end_inset


\end_layout

\begin_layout Standard
The source code for the WDPM is available from the GitHub repository at

\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://github.com/CentreForHydrology/WDPM
\end_layout

\end_inset

.
 Additional documentation and the compiled version of the WDPM for Windows
 may be downloaded from the website of the Centre for Hydrology at
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://research-groups.usask.ca/hydrology/modelling/wdpm.php
\end_layout

\end_inset

.

\end_layout

\begin_layout Section
Package dependencies
\end_layout

\begin_layout Standard
Although the WDPM does not require other packages to be installed, it
 works much better with them.
 Because the packages that make up the dependencies
 for the WDPM change frequently and to avoid over-writing existing
 versions with older versions, these dependencies are not supplied with the
 WDPM.
 The user is responsible for installing any dependencies, preferably before installing the WDPM.
\end_layout

\begin_layout Standard
The memory required by the program will depend on the size of the DEM processed.
 As is described in section
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Model-execution-time"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the primary limitation of the program is its processing requirements.
\end_layout

\begin_layout Subsection
OpenCL drivers
\end_layout

\begin_layout Standard
As described above, the WDPM uses OpenCL to provide parallel processing,
 which requires the appropriate drivers to be installed.
 However, the WDPM can also run in serial mode when
 appropriate drivers are unavailable.
 The selection of the processing mode is shown on
\begin_inset CommandInset ref
LatexCommand vpageref
reference "enu:Click-on-Process"

\end_inset

.
 The drivers installed depend on the operating system (Linux, MacOS,
 Windows) as well as the CPU (Intel/AMD) and GPU (NVIDIA/AMD).
 We note that OpenCL has been deprecated on MacOS, so there is no guarantee
 that it will continue to function in the future.
\end_layout

\begin_layout Standard
Some of the drivers sources are listed in Table
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:CPU-and-GPU"
plural "false"
caps "false"
noprefix "false"

\end_inset

 below:
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
OpenCl CPU and GPU drivers
\begin_inset CommandInset label
LatexCommand label
name "tab:CPU-and-GPU"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="5" columns="3">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<column alignment="center" valignment="top">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Type
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Manufacturer
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Link
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CPU
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Intel
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://software.seek.intel.com/intel-opencl
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AMD
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.amd.com/en/support
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GPU
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NVIDIA
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.nvidia.com/download/index.aspx?lang=en-us
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AMD
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.amd.com/en/support
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
WDPM has been found to work with Intel CPU drivers and NVIDIA GPU drivers.
 Note that the Intel drivers included with Ubuntu/Linux Mint (
\begin_inset Quotes eld
\end_inset

beignet
\begin_inset Quotes erd
\end_inset

) do not work with WDPM, so in this case it is necessary to download the drivers
 directly from Intel.
 If you have already installed the beignet drivers, it is necessary to do
 a complete removal before installing the drivers from Intel.
\end_layout

\begin_layout Subsection
Python 3
\end_layout

\begin_layout Standard
The WDPM can be run directly from the command line, but the GUI requires

\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
 to be installed.
 On a Linux system, you can install
\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
 using your package manager.
 On Windows, you can install
\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
 from
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.python.org/downloads/windows/
\end_layout

\end_inset

.
 On MacOS, you can install
\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
 from
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://www.python.org/downloads/mac-osx/
\end_layout

\end_inset

 or from
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://brew.sh/
\end_layout

\end_inset

.
\end_layout

\begin_layout Standard
The GUI also requires the library
\family typewriter
wxPython
\family default
 to be installed.
 You can do this from the
\series bold
pip
\series default
 package manager, which can be obtained for Windows or MacOS at
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://pypi.org/project/pip/
\end_layout

\end_inset

.
 Linux users can install pip from the package manager, typically by installing
 the package
\family typewriter
python3-pip
\family default
.
\end_layout

\begin_layout Standard
Pip can then install
\family typewriter
wxPython
\family default
 the using the command
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

pip install -U wxPython
\end_layout

\end_inset

 or
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

pip3 install -U wxPython
\end_layout

\end_inset

 depending on your system.

\end_layout

\begin_layout Standard
Unfortunately, there is an issue with
\family typewriter
wxPython
\family default
 on Ubuntu 20.04 (and distributions based on it) because it uses
\family typewriter
libpng-dev
\family default
 version 1.6, whereas
\family typewriter
wxPython
\family default
 requires version 1.2.
 You can find instructions on how to install the older versions of
\family typewriter
libpng-dev
\family default
 at
\begin_inset CommandInset href
LatexCommand href
name "www.pixelstech.net/article/1599647177-Problem-and-Solution-for-Installing-wxPython-on-Ubuntu-20-04"
target "www.pixelstech.net/article/1599647177-Problem-and-Solution-for-Installing-wxPython-on-Ubuntu-20-04"
literal "false"

\end_inset

.
\end_layout

\begin_layout Subsection
GDAL
\end_layout

\begin_layout Standard
As described above, the WDPM GUI can use the program
\series bold
gdaldem
\series default
 to create simple maps of water from the WDPM outputs.
 If you are using Linux, you can install the
\series bold
GDAL
\series default
 suite from your package manager.
 If you are using Windows or MacOS, you can install
\series bold
GDAL
\series default
 from
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://gdal.org/download.html
\end_layout

\end_inset

.
 Execution of
\series bold
gdaldem
\series default
 is done by a shell script,
\family typewriter
cmap.bat
\family default
 (Windows) or
\family typewriter
cmap_black.sh
\family default
 (Linux/MacOS), which must be in the same directory as the WDPM executable
 and GUI.
 The script file can be modified if necessary to specify the path to
\series bold
gdaldem
\series default
 or any other desired parameters.
 The file
\family typewriter
colormap_black.txt
\family default
, which sets the colours used, must also be in the same directory.
\end_layout

\begin_layout Section
Binary distribution
\end_layout

\begin_layout Standard
The WDPM is available as a pre-compiled (binary) version for Windows.
 The binary distribution of the WDPM was only compiled for Intel processors
 and does not work on computers with AMD processors.
 The steps required to install the program are
\end_layout

\begin_layout Enumerate
Install the
\series bold
OpenCL
\series default
 drivers
\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
 and
\series bold
 GDAL
\series default
 as described above.
\end_layout

\begin_layout Enumerate
Copy the file
\family typewriter
WDPM2_WIN.zip
\family default
 to your hard drive and double-click to extract it here.
 The files will be extracted to a directory called
\family typewriter
WDPM
\family default
.
\end_layout

\begin_layout Enumerate
To run the program, double-click on the file
\family typewriter
WDPM.bat
\family default
.
\end_layout

\begin_layout Section
Installing WDPM from the source code
\begin_inset CommandInset label
LatexCommand label
name "sec:Compiling-the-source"

\end_inset


\end_layout

\begin_layout Standard
The most recent version of the WDPM source code may be obtained from GitHub
 at
\begin_inset Flex URL
status open

\begin_layout Plain Layout

https://github.com/CentreForHydrology/WDPM
\end_layout

\end_inset

.
 The source code is in the folder
\family typewriter
/src
\family default
.
\end_layout

\begin_layout Subsection
Installation of the OpenCL libraries
\end_layout

\begin_layout Standard
Compiling the source code requires installation of the OpenCL libraries,
 as described above.

\end_layout

\begin_layout Subsection
Building WDPM
\end_layout

\begin_layout Standard
The WDPM program code can be built using
\series bold
gcc
\series default
, which is a standard part of all Linux distributions, and can be downloaded
 for Windows or OSX at
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://gcc.gnu.org/
\end_layout

\end_inset

.
 If you are building on Windows, you should install
\series bold
MinGW
\series default
, which is a minimalist installation of the GNU tools for Windows that
 includes all of the required tools.
 To install
\series bold
MinGW
\series default
, follow the following steps:
\end_layout

\begin_layout Enumerate
You can get
\series bold
MinGW
\series default
from
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.mingw.org/
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Download and run the installation program
\series bold
mingw-get-Setup.exe
\series default
.
\end_layout

\begin_layout Enumerate
The
\series bold
gcc
\series default
 and
\series bold
g++
\series default
 compilers will be installed by default.
 You will also have to select the
\series bold
make
\series default
 package as well by adding all of the
\family typewriter
ming32-make
\family default
 files.
\end_layout

\begin_layout Enumerate
After installation of the packages, you must add the path to
\series bold
MinGW
\series default
 to the environment path.
\end_layout

\begin_layout Enumerate
You can test the installation using the command:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

gcc -v
\end_layout

\end_inset

 If the installation is successful, you will see the version information.
\end_layout

\begin_layout Subsubsection
Building with cmake
\end_layout

\begin_layout Standard
The most reliable way to build the WDPM is using the program
\series bold
cmake
\series default
, which is included with Linux (install with your package manager) and
\series bold
MinGW
\series default
.
 The source code consists of one file,
\family typewriter
WDPMCL.c
\family default
.
 The file
\family typewriter
CMakeLists.txt
\family default
needs to be in the same directory as
\family typewriter
WDPMCL.c
\family default
and contains the instructions to produce the file
\family typewriter
Makefile
\family default
, which is used to build the WDPM.
\end_layout

\begin_layout Standard
Building the program takes 2 steps: 1) creating the
\family typewriter
Makefile
\family default
 with
\series bold
cmake
\series default
and 2) running
\series bold
make
\series default
 to build the program.
\end_layout

\begin_layout Standard
1.
 Creating the
\family typewriter
Makefile
\family default
.
 Assuming that
\family typewriter
CMakeLists.txt
\family default
 is properly configured, the command on Linux or MacOS is simply
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

cmake .
\end_layout

\end_inset


\end_layout

\begin_layout Standard
On Windows, the command is
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

cmake -G "Unix Makefiles"
\end_layout

\end_inset


\end_layout

\begin_layout Standard
2.
 Building the program.
 Assuming that
\series bold
cmake
\series default
 executed correctly, the
\series bold
make
\series default
 command is simply
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

make
\end_layout

\end_inset


\end_layout

\begin_layout Standard
Once
\series bold
make
\series default
 has finished, the executable program
\family typewriter
WDPMCL
\family default
 (Linux/MacOS) or
\family typewriter
WDPMCL.EXE
\family default
(Windows) will have been created.
\end_layout

\begin_layout Subsubsection
Kernel file
\end_layout

\begin_layout Standard
The file
\family typewriter
runoff.cl
\family default
must be present inside the same directory as the compiled WDPM executable.
 It contains the code that redistributes the water.
 It is this code that is run in parallel by all cores on the CPU or GPU.
\end_layout

\begin_layout Subsection
Other files
\end_layout

\begin_layout Standard
Use of the GUI requires the file
\family typewriter
WDPM-GUI.py
\family default
 to be installed in the same directory as the compiled executable file
 and for Python
\begin_inset space \space{}
\end_inset

3 to be installed.
 Use of
\series bold
gdaldem
\series default
 to create water maps requires the files
\family typewriter
cmap.bat
\family default
 (Windows) or
\family typewriter
cmap_black.sh
\family default
 (Linux/MacOS) in the same directory as the WDPM executable and GUI.
 The file
\family typewriter
colormap_black.txt
\family default
, which sets the colours used, must also be in the same directory.
 The file
\family typewriter
test.txt
\family default
is a sample parameter text file.
 The file
\family typewriter
basin5.asc
\family default
 is a sample DEM.
\end_layout

\begin_layout Chapter
How to run the WDPM
\end_layout

\begin_layout Standard
The WDPM can be run either from the graphical user interface (GUI) or from
 the command line.
 Many users may prefer the GUI, but the command-line version is useful
 to run the WDPM in scripts.
 We note that if you are running the WDPM under Linux or MacOS, all four executable
 files
\family typewriter
WDPMCL
\family default
,
\family typewriter
runoff.cl,cmap_black.sh
\family default
, and
\family typewriter
WDPM.py
\family default
 must have their permissions set to allow execution.
\end_layout

\begin_layout Section
GUI
\end_layout

\begin_layout Standard
The GUI for the WDPM is written in
\series bold
Python
\begin_inset space \thinspace{}
\end_inset

3
\series default
, and can be executed using the command
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python WDPM-GUI.py
\end_layout

\end_inset

 or
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

python3 WDPM-GUI.py
\end_layout

\end_inset

depending on your computer, in the directory containing
\family typewriter
WDPM-GUI.py
\family default
.
 If you have installed the Windows binary version of WDPM, then you can
 execute the program by double-clicking on the file
\family typewriter
WDPM.bat
\family default
.

\end_layout

\begin_layout Standard
The GUI looks slightly different depending on which operating system
 it is run.
 The image in Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:The-WDPM-GUI"

\end_inset

 shows the GUI under Windows.
 The
\series bold
File
\series default
 menu only displays the information about the program or the option to quit.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename Windows_GUI.PNG
	width 10cm

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
The WDPM GUI (Windows version).
\begin_inset CommandInset label
LatexCommand label
name "fig:The-WDPM-GUI"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Running the program requires the following steps
\begin_inset Index idx
status open

\begin_layout Plain Layout
step-by-step instructions
\end_layout

\end_inset

:
\end_layout

\begin_layout Enumerate
Click on Browse to set the working directory.
 The scratch file (if used) and reports.txt will be written to this directory.
\end_layout

\begin_layout Enumerate
Select the method: Add, Subtract, Drain, or TextFile.
 Once you have selected the method, the appropriate module components will
 be activated.
 If you select TextFile, steps 3 -- 9 may be ignored after the text file
 has been selected using the Browse button near the bottom of the screen.
\end_layout

\begin_layout Enumerate
Set the DEM file name.
 The DEM must be an ArcGIS ASCII file (.asc).
\end_layout

\begin_layout Enumerate
Set the Water (input) file, if it is required.
 If the file is not used, the file name is set to NULL.
\end_layout

\begin_layout Enumerate
If a scratch file is defined, the model results will be written to it every
 1000 iterations.
 This is useful if the process might be canceled, as can happen on a shared
 cluster, or if there is a crash.
 It also allows you to save the results if you manually terminate the program.
 However, writing to a scratch file slows the program.
 The default file name is NULL, preventing a scratch file from being
 used.
\end_layout

\begin_layout Enumerate
Now set the parameters for the module that you have selected, as described
 below.
\end_layout

\begin_layout Enumerate
Click on Process to set the calculation method and select either Serial
 or OpenCL processing
\begin_inset CommandInset label
LatexCommand label
name "enu:Click-on-Process"

\end_inset

.
\end_layout

\begin_layout Enumerate
If you selected OpenCL, select either CPU or GPU for the parallel processing.
\end_layout

\begin_layout Enumerate
Set the Zero depth threshold.
 This should normally be a small value (e.g., 0.005 mm).
\end_layout

\begin_layout Enumerate
Set the Iteration limit.
 If you do not want to limit the number of iterations, set this value to
 zero.
\end_layout

\begin_layout Enumerate
Click on the Start button to begin execution.
\end_layout

\begin_layout Enumerate
When the program has completed execution, you can create a simple image
 from the output .asc file.
 Click on the Browse button to choose the file and then the Convert button.
\end_layout

\begin_layout Standard
When the program runs, it outputs to the right-hand side of the screen.
 The run information includes statistics about the DEM and the water file
 (if used).
 Each 1000 iterations, the model also outputs the change in the water,
 allows you to see how quickly it is converging.
 All of these outputs are stored in the file
\family typewriter
report.txt
\family default
 in the current directory.
 You can abort the run at any time by clicking on the End button.
 The Clear button clears the previous run information from the screen.
\end_layout

\begin_layout Section
Module parameters
\begin_inset CommandInset label
LatexCommand label
name "sec:Module-parameters"

\end_inset


\end_layout

\begin_layout Standard
In addition to the basic parameters described above, each module has its
 own set of run parameters.

\end_layout

\begin_layout Subsection
Add parameters
\end_layout

\begin_layout Enumerate
Depth of water (mm).
 This is the depth of water added to the entire DEM.
 There is no spatial variability.
\end_layout

\begin_layout Enumerate
Water runoff fraction (0--1).
 Setting the runoff fraction allows some of the water applied to dry ground
 to infiltrate the soil while not affecting any of the water applied to
 existing water (if you are using a water file).
\end_layout

\begin_layout Enumerate
Elevation tolerance (mm).
 If the maximum change in the water depth, at any location in the DEM, is
 smaller than this value, then the run will terminate.
\end_layout

\begin_layout Subsection
Subtract parameters
\end_layout

\begin_layout Enumerate
Depth of water (mm).
 This is the depth of water subtracted from the entire DEM.
 There is no spatial variability, but where the existing water depth is
 smaller than this value, the resulting depth is set to zero.
\end_layout

\begin_layout Enumerate
Elevation tolerance (mm).
 If the maximum change in the water depth in 1000 iterations, at any location
 in the DEM, is smaller than this value, then the run will terminate.
\end_layout

\begin_layout Subsection
Drain parameters
\end_layout

\begin_layout Enumerate
Elevation tolerance (mm).
 If the maximum change in the water depth in 1000 iterations, at any location
 in the DEM, is smaller than this value, then the run will terminate.
\end_layout

\begin_layout Enumerate
Drain tolerance (m
\begin_inset script superscript

\begin_layout Plain Layout
3
\end_layout

\end_inset

).
 If the volume of water draining in 1000 iterations is smaller than this
 value, then the run will terminate.
\end_layout

\begin_layout Subsection
Parameter text files
\begin_inset CommandInset label
LatexCommand label
name "subsec:Text-files"

\end_inset


\end_layout

\begin_layout Standard
The parameters can also be stored in simple text files.
 A sample file,
\family typewriter
test.txt
\family default
, used for the Add module is shown below.
 The comments must NOT be included.
 Note that parameters and their order are the same as shown in Section
\begin_inset CommandInset ref
LatexCommand ref
reference "sec:Command-line"

\end_inset

.
\end_layout

\begin_layout Standard
\begin_inset Tabular
<lyxtabular version="3" rows="13" columns="2">
<features tabularvalignment="middle">
<column alignment="left" valignment="top">
<column alignment="left" valignment="top">
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Line
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Meaning
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
add
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Module to be used
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
basin5.asc
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
DEM file
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
NULL
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Input water file
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
water.asc
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Output file
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
NULL
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Scratch file
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
10.0
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Add 10 mm
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1.0
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Runoff fraction
\begin_inset Index idx
status open

\begin_layout Plain Layout
runoff fraction
\end_layout

\end_inset


\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1.0
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Elevation tolerance = 1mm
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
1
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Use OpenCL
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
0
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Use CPU
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
0.005
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zero depth threshold (mm)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\family typewriter
0
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Max number of iterations (0 to omit)
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\begin_layout Section
Command line
\begin_inset CommandInset label
LatexCommand label
name "sec:Command-line"

\end_inset


\end_layout

\begin_layout Standard
Version 2.0 of WDPM can be executed directly from the command line or from
 within a scripting language.
 The
\begin_inset Index idx
status open

\begin_layout Plain Layout
command-line arguments
\end_layout

\end_inset

command-line arguments are the same for all operating systems.
 The required arguments are output to the file
\family typewriter
report.txt
\family default
 if the program is run without the correct arguments as shown here:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

Add module specified
\end_layout

\begin_layout Plain Layout

DEM file name (string)
\end_layout

\begin_layout Plain Layout

Water file name (string) - Optional, Use NULL to omit Output file name (string)
\end_layout

\begin_layout Plain Layout

Scratch file name (string) - Optional, use NULL to omit
\end_layout

\begin_layout Plain Layout

Depth of water to add (mm) (real) Water runoff fraction (real)
\end_layout

\begin_layout Plain Layout

Elevation tolerance (mm) (real)
\end_layout

\begin_layout Plain Layout

Specify 0 for serial CPU and 1 for opencl
\end_layout

\begin_layout Plain Layout

Specify 0 for OpenCL CPU and 1 for opencl GPU
\end_layout

\begin_layout Plain Layout

Zero depth threshold (mm) (real)
\end_layout

\begin_layout Plain Layout

Maximum number of iterations (integer) - Optional, Use 0 to omit

\end_layout

\begin_layout Plain Layout


\end_layout

\begin_layout Plain Layout

Subtract module specified
\end_layout

\begin_layout Plain Layout

DEM file name (string)
\end_layout

\begin_layout Plain Layout

Water file name (string) - Optional, Use NULL to omit
\end_layout

\begin_layout Plain Layout

Output file name (string)
\end_layout

\begin_layout Plain Layout

Scratch file name (string) - Optional, use NULL to omit
\end_layout

\begin_layout Plain Layout

Depth of water to remove (mm) (real)
\end_layout

\begin_layout Plain Layout

Elevation tolerance (mm) (real)
\end_layout

\begin_layout Plain Layout

Specify 0 for serial CPU and 1 for opencl
\end_layout

\begin_layout Plain Layout

Specify 0 for OpenCL CPU and 1 for opencl GPU
\end_layout

\begin_layout Plain Layout

Zero depth threshold (mm) (real)
\end_layout

\begin_layout Plain Layout

Maximum number of iterations (integer) - Optional, Use 0 to omit

\end_layout

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout

Program arguments in order of specification
\end_layout

\begin_layout Plain Layout

Subtract module specified
\end_layout

\begin_layout Plain Layout

DEM file name (string)
\end_layout

\begin_layout Plain Layout

Water file name (string) - Optional, Use NULL to omit
\end_layout

\begin_layout Plain Layout

Output file name (string)
\end_layout

\begin_layout Plain Layout

Scratch file name (string) - Optional, use NULL to omit
\end_layout

\begin_layout Plain Layout

Depth of water to remove (mm) (real)
\end_layout

\begin_layout Plain Layout

Elevation tolerance (mm) (real)
\end_layout

\begin_layout Plain Layout

Specify 0 for serial CPU and 1 for opencl
\end_layout

\begin_layout Plain Layout

Specify 0 for OpenCL CPU and 1 for opencl GPU
\end_layout

\begin_layout Plain Layout

Zero depth threshold (mm) (real)
\end_layout

\begin_layout Plain Layout

Maximum number of iterations (integer) - Optional, Use 0 to omit
\end_layout

\end_inset


\end_layout

\begin_layout Standard
When the program is executed correctly, then the output is displayed on the
 console and also written to the file
\family typewriter
report.txt
\family default
.

\end_layout

\begin_layout Standard
Example - adding 10 mm of water, without a preexisting water file or using
 a scratch file, with a runoff fraction of 1.0, a tolerance of 1 mm, using
 OpenCL with the CPU, a zero depth threshold of 0.005 mm, and no restriction
 on the number of iterations on Linux or MacOS:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

WDPMCL add basin5.asc NULL water.asc NULL 10.0 1.0 1.0 1 0 0.005 0
\end_layout

\end_inset


\end_layout

\begin_layout Standard
On Windows, the command would be
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

WDPMCL.exe add basin5.asc NULL water.asc NULL 10.0 1.0 1.0 1 0 0.005 0
\end_layout

\end_inset


\end_layout

\begin_layout Section
Model execution time
\begin_inset CommandInset label
LatexCommand label
name "sec:Model-execution-time"

\end_inset


\end_layout

\begin_layout Standard
The WDPM was run on a variety of computers to test its execution time using
 the same small DEM (471 x 482 elements) and used to produce Figures
\begin_inset space \thinspace{}
\end_inset


\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water-1"

\end_inset

--
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water"

\end_inset

.
 The execution times for all of the modules for all computers are listed
 in Table
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Execution-time-of"

\end_inset

.
 All of the Add and Subtract runs used a tolerance of 1 mm, with the Drain
 runs also using a volume tolerance of 10 m
\begin_inset script superscript

\begin_layout Plain Layout
3
\end_layout

\end_inset

.
 In all cases, the zero depth threshold was set to 0.005 mm.
 No limit was set on the number of iterations.
 The  poor OpenCL performance of the NVIDIA Quadro K420 GPU is believed
 to be due to WDPM using double-precision values, which have poor performance on
 this card.
\end_layout

\begin_layout Standard
\begin_inset Float table
placement H
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Execution time of the WDPM (seconds).
\begin_inset CommandInset label
LatexCommand label
name "tab:Execution-time-of"

\end_inset


\end_layout

\end_inset


\begin_inset Tabular
<lyxtabular version="3" rows="10" columns="7">
<features tabularvalignment="middle">
<column alignment="left" valignment="middle" width="2cm">
<column alignment="left" valignment="middle" width="2cm">
<column alignment="left" valignment="middle" width="2cm">
<column alignment="left" valignment="middle" width="2cm">
<column alignment="decimal" decimal_point="." valignment="middle" width="2cm">
<column alignment="decimal" decimal_point="." valignment="middle" width="2cm">
<column alignment="decimal" decimal_point="." valignment="middle" width="2cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
CPU
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
GPU
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OS
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Module
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Serial
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OpenCL CPU
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
OpenCL GPU
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
i7-6700,
\begin_inset Newline linebreak
\end_inset

3.4
\begin_inset space ~
\end_inset

GHz,
\begin_inset Newline linebreak
\end_inset

8 cores
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NVIDIA Quadro K420
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Linux Mint 20
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Add 10 mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
59.15
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
18.08
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
70.81
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Drain
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14.69
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5.7
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
19.45
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Subtract 10mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.51
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.14
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
4.15
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Xeon W,
\begin_inset Newline linebreak
\end_inset

3
\begin_inset space \thinspace{}
\end_inset

GHz,
\begin_inset Newline linebreak
\end_inset

10 cores
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
AMD Radeon Pro Vega 56
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
MacOS
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Add 10 mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
57.09
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
33.56
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
27.9
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Drain
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14.73
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10.06
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
10.33
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Subtract 10mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.64
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.83
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.85
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="left" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
i7-9750,
\begin_inset Newline linebreak
\end_inset

2.60
\begin_inset space \thinspace{}
\end_inset

GHz, 6 cores
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
NVIDIA GeForce GTX 1650
\end_layout

\end_inset
</cell>
<cell multirow="3" alignment="left" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Windows 10
\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Add 10 mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
57.35
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
22.65
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
19.81
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Subtract 10mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
14.80
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7.51
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
7.31
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell multirow="4" alignment="left" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="left" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Subtract 10mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.63
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.36
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
2.00
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status collapsed

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Subsection
Effect of zero depth threshold on execution time
\end_layout

\begin_layout Standard
The effects of the zero depth threshold were tested by running the program
 repeatedly on the system with the i7-6700 CPU (3.4
\begin_inset space ~
\end_inset

GHz x 8 cores).
 As can be seen from the execution times listed in Table
\begin_inset CommandInset ref
LatexCommand ref
reference "tab:Zero-depth-execution-time"
plural "false"
caps "false"
noprefix "false"

\end_inset

, the use of a zero depth threshold greatly reduced the CPU time required
 to add and drain water while having small effects on the final volumes
 of water on the DEM.
 Using a depth threshold of 1 mm further reduced the execution time and
 the number of iterations but at the cost of reducing the final volume
 of water on the DEM.
 It is recommended that a zero depth threshold value of 0.005 mm be used
 in most cases, particularly for studies where the contributing fraction
 of a basin is estimated by the volume of water remaining after drainage.
 If the general arrangement of water is the only interest, then a coarser
 threshold may be justified.
\end_layout

\begin_layout Standard
\begin_inset Float table
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Caption Standard

\begin_layout Plain Layout
Execution time of the WDPM for varying zero thresholds.
\begin_inset CommandInset label
LatexCommand label
name "tab:Zero-depth-execution-time"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout
\begin_inset Tabular
<lyxtabular version="3" rows="7" columns="5">
<features tabularvalignment="middle">
<column alignment="center" valignment="top">
<column alignment="decimal" decimal_point="." valignment="top" width="2cm">
<column alignment="decimal" decimal_point="." valignment="top" width="0pt">
<column alignment="center" valignment="top">
<column alignment="decimal" decimal_point="." valignment="top" width="2.5cm">
<row>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Module
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Zero depth threshold (mm)
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Time (s)
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Iterations
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Final
\begin_inset Newline linebreak
\end_inset

volume (m
\begin_inset script superscript

\begin_layout Plain Layout
3
\end_layout

\end_inset

)
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Add 50 mm
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.0
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
5,760.47
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
385,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
550,176.2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.005
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
857.40
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
385,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
550,175.2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.0
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
787.61
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
378,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
548,360.8
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="3" alignment="center" valignment="middle" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
Drain
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.0
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1,142.87
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
367,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
380,605.2
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
0.005
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
779.85
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
367,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
380,605.1
\end_layout

\end_inset
</cell>
</row>
<row>
<cell multirow="4" alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout

\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
1.0
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
566.82
\end_layout

\end_inset
</cell>
<cell alignment="center" valignment="top" topline="true" bottomline="true" leftline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
307,000
\end_layout

\end_inset
</cell>
<cell alignment="decimal" valignment="top" topline="true" bottomline="true" leftline="true" rightline="true" usebox="none">
\begin_inset Text

\begin_layout Plain Layout
380,084.0
\end_layout

\end_inset
</cell>
</row>
</lyxtabular>

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Section
Tips and tricks
\end_layout

\begin_layout Subsection
Estimation of spring flooded areas
\end_layout

\begin_layout Standard
As described previously, the WDPM is not a hydrological model.
 However, it is possible to use the WDPM to estimate the areas of flooding
 due to spring runoff.
 The steps are:
\end_layout

\begin_layout Enumerate
Obtain an air photo of the region taken in the previous fall or late summer.
\end_layout

\begin_layout Enumerate
Establish the initial water distribution.
 Run the WDPM repeatedly, adding and removing water by trial and error,
 until the water distribution agrees (more or less) with the air photo.
\end_layout

\begin_layout Enumerate
Estimate the total snow accumulation over the winter.
 Because of sublimation and relocation due to blowing snow, this estimate will invariably
 be different from the total snowfall.
 Obviously, the total snowfall is best estimated by a snow survey.
 In the absence of a survey, the best method for estimating the snow
 accumulation is to run the Cold Regions Hydrological Modelling (CRHM)
\begin_inset Index idx
status open

\begin_layout Plain Layout
Cold Regions Hydrological modelling platform (CRHM)
\end_layout

\end_inset

 platform, which is available from the Centre for Hydrology.
 You should be advised that CRHM is not like other hydrological models
 and takes some time to learn.
\end_layout

\begin_layout Enumerate
The fraction of the snow melt water that infiltrates to the soil is best
 estimated using CRHM; however, it can also be estimated using the procedures
 described in
\begin_inset CommandInset citation
LatexCommand citet
key "granger1984"
literal "true"

\end_inset

, which can be downloaded from the Centre for Hydrology website at
\begin_inset Flex URL
status open

\begin_layout Plain Layout

http://www.usask.ca/hydrology/ListPubs.php.
\end_layout

\end_inset


\end_layout

\begin_layout Enumerate
Apply the total water equivalent depth of the accumulated snowcover using
 the WDPM Add module.
 Set the
\begin_inset Index idx
status open

\begin_layout Plain Layout
runoff fraction
\end_layout

\end_inset

runoff fraction equal to (1 -- the infiltration fraction).
 The output of the WDPM, (when drained, if necessary) will be an estimate
 of the spring water distribution.

\end_layout

\begin_layout Subsection
Contributing fraction
\end_layout

\begin_layout Standard
The fraction of the basin contributing flow can be estimated by adding a
 small depth of water to an existing water file, followed by draining.
 The contributing fraction is then calculated from the change in volume
 and can be obtained from the file
\family typewriter
report.txt
\family default
.
 The process is described in
\begin_inset CommandInset citation
LatexCommand citet
key "shook2011,shook2013"
literal "true"

\end_inset

.
\end_layout

\begin_layout Subsection
Visualizing the output
\begin_inset CommandInset label
LatexCommand label
name "subsec:Visualizing-the-output"

\end_inset


\end_layout

\begin_layout Standard
The WDPM is intended to be used with a Geographical Information System (GIS)
 program because operational use often requires the program output to be overlaid
 on top of the DEM or other infrastructure.
 GIS programs are also useful for creating the DEM file.
 There are several Free Open Source Software (FOSS) GIS programs
\begin_inset Index idx
status open

\begin_layout Plain Layout
Free Open Source Software (F.O.S.S.) GIS programs
\end_layout

\end_inset

 available, such as
\series bold
QGIS
\series default
 (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

www.qgis.org
\end_layout

\end_inset

),
\series bold
SAGA
\series default
 (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://www.saga-gis.org/en/index.html
\end_layout

\end_inset

), and
\series bold
WhiteBox
\series default
 (
\begin_inset Flex URL
status collapsed

\begin_layout Plain Layout

http://www.uoguelph.ca/~hydrogeo/Whitebox/
\end_layout

\end_inset

).
\end_layout

\begin_layout Standard
The WDPM can also produce a simple water map from the output file
 using the Geospatial Data Abstraction Library (GDAL), which is a free set
 of command-line GIS tools
\begin_inset CommandInset citation
LatexCommand citep
key "gdal2020"
literal "false"

\end_inset

.
 The GDAL program
\series bold
gdaldem
\begin_inset Index idx
status open

\begin_layout Plain Layout
gdaldem
\end_layout

\end_inset


\series default
 was used to create the water maps seen in Figures
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water-1"

\end_inset

,
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water-50-removed"

\end_inset

, and
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:100mm-of-water"

\end_inset

.
 The use of
\series bold
gdaldem
\series default
 requires a color map, which is a text file containing the colors assigned
 to each depth of water in the output file.
 The WDPM color map file is
\family typewriter
colormap_black.txt
\family default
, which must be stored in the same directory as the WDPM executable.
 The default values in the file are:
\end_layout

\begin_layout Standard
\begin_inset listings
inline false
status open

\begin_layout Plain Layout

3,25,0,230
\end_layout

\begin_layout Plain Layout

0.001,25,0,230
\end_layout

\begin_layout Plain Layout

0,yellow
\end_layout

\begin_layout Plain Layout

-9999, black
\end_layout

\end_inset


\end_layout

\begin_layout Standard
This file will set depths between 0.001 m and 3 m to be blue, zero depths
 to be yellow, and missing values to be black.
 The specified depths and colors can be changed by simply editing the
 file.
\end_layout

\begin_layout Chapter
Case Study: Adaptation for the Land and Infrastructure Resiliency Assessment
 (LIRA)
\begin_inset CommandInset label
LatexCommand label
name "chap:Case-study:-the"

\end_inset


\end_layout

\begin_layout Standard
The Land and Infrastructure Resiliency Assessment (LIRA) project
\begin_inset Index idx
status open

\begin_layout Plain Layout
Land and Infrastructure Resiliency Assessment (LIRA) project
\end_layout

\end_inset

 is a sub-component of the recently concluded Climate Adaptation for Resilience
 in Agriculture (CARA) project funded by Agriculture and Agri-Food Canada
 (AAFC)
\begin_inset Index idx
status open

\begin_layout Plain Layout
Agriculture and Agri-Food Canada (AAFC)
\end_layout

\end_inset

.
 The impetus for the LIRA project was based on observed flood damages to
 vital infrastructure and access to essential services in Honduras in 1998
 due to Hurricane Mitch.
 Although destruction of a similar nature and magnitude is unlikely in most
 regions of Canada, concerns have increased across the Prairies in recent
 years due to excess moisture conditions, rising water tables, and severe
 localized flooding and damage in some locations.
\end_layout

\begin_layout Standard
The key goal of LIRA is to assist decision-makers in identifying locations
 across their landscape that may be vulnerable to extreme overland flood
 events and potential cost-effective mitigation and adaptation strategies.
 LIRA is designed to integrate local knowledge, science (e.g.,
 hydrology and climate), GIS technology, and economics into a cost-benefit
 analysis framework.
 Numerous inputs are required for the economic analysis, just one of which
 is a flood hazard map.
 A critical question asked by the LIRA process is whether any economic assets
 or essential transportation and emergency services routes are located in
 flood hazard zones or may be impacted by flood damages incurred elsewhere.
\end_layout

\begin_layout Section
Flood hazard mapping for LIRA applications
\end_layout

\begin_layout Standard
The basic goal of flood hazard mapping is to identify the spatial extents
 within a landscape that may be covered by flood waters or potential hot
 spots where flood damages may be a concern.
 Flood hazard maps have typically been developed using flood frequency analysis
 and hydraulic modelling techniques and so have only been possible along
 primary waterways.
 Essentially, such products identify flood hazard zones where any developments
 should be protected, restricted, or not permitted at all.
 Unfortunately, existing maps such as those developed through the Federal
 Disaster Reduction Program from the 1980s have fallen into disuse.
 Effective use of these mapping products would require updates for the recent
 climate conditions.

\end_layout

\begin_layout Standard
More advanced modelling techniques exist today that can be used to generate
 flood-risk based hazard maps.
 Unfortunately, the standard approaches used to develop such maps are incapable
 of identifying hazards in outlying areas not directly connected to the
 main drainage channels.
 The WDPM was introduced to LIRA specifically because of the model's capacity
 to generate spatially explicit distributed runoff maps across entire landscapes
 even where no streams exist.
 A limitation of the current modelling strategy is that the WDPM does not
 directly model hydrology or hydrodynamics.
 In the short term, however, application of WDPM has helped to circumvent
 key difficulties that restrict standard approaches from flood hazard mapping
 within most Prairie basins.

\end_layout

\begin_layout Standard
In recent LIRA pilot studies, the application of the WDPM has allowed for diagnostic
 assessments of runoff accumulation zones and hydrographic connectivity.
 This has included backwater ponding hazards upstream of road
\begin_inset Index idx
status open

\begin_layout Plain Layout
roads in DEMs
\end_layout

\end_inset

 intersections and other potential impoundments that bisect water flow
 paths.
 A benefit of this ad hoc approach for LIRA stakeholders has been that
 diagnostic flood hazard maps for entire landscapes have been provided to decision-makers
 for the first time.
 A general distinction between flood hazard zones identified using standard
 hydraulic methods and those from WDPM is currently defined by the probabilistic
 analysis of individual flood events and estimates of the resulting water
 volumes.

\end_layout

\begin_layout Section
WDPM flood hazard mapping case study results for Redberry Lake Planning
 Region
\end_layout

\begin_layout Standard
Community stakeholder involvement is a crucial resource for LIRA projects.
 As part of the Redberry Lake pilot study, a LiDAR survey was conducted
 in the fall of 2011 for the Radisson / Borden region in Saskatchewan to
 address community concerns over flood vulnerabilities.
 A validation opportunity for the WDPM flood hazard maps subsequently arose
 during the spring melt period of 2013 when flood emergencies were declared
 by both communities.
 The flooding was attributed to saturated conditions and snow-melt runoff
 over frozen soils that filled numerous depressions to their storage capacities.
 Once exceeded, the spilling water activated key flow connections between
 the depressions, inundating large areas within the communities.
\end_layout

\begin_layout Standard
The flooding events were captured by ground and aerial photos taken by federal
 (AAFC) and provincial agencies (special thanks to Frank Fox; now retired
 from the Water Security Agency).
 Flood hazard maps generated previously with WDPM and made available to the
 communities were compared to the flood event photos.
 The runoff maps shown here were generated by applying a water depth of
 100 mm to the 5 m LiDAR DEMs and are displayed with a GIS overlay of the
 cadastral fabric for the townships.
 Figures
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Radisson-Lake-WDPM"

\end_inset

 through
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Borden-area-and"

\end_inset

 demonstrate the validity of flood hazard mapping using the WDPM based on
 comparisons of flood extents for large ponded areas and along primary flow
 paths as seen in the images.
 These areas are linked by numbered location in the maps and photos.

\end_layout

\begin_layout Standard
Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Radisson-Lake-WDPM"

\end_inset

 shows results for the Radisson Lake area where water flows along a circuitous
 course from location 1 to location 4.
 Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Town-of-Radisson"

\end_inset

 shows results of hazard mapping for the town of Radisson.
 In this case, an extensive area was flooded just northwest of the town.
 To partly mitigate flooding, water was pumped from location 1 to 2, and
 water flowed into the town from the west.
 The water flowed directly through town along a natural drainage path captured
 by the LiDAR data (Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Centre-of-town"

\end_inset

) and was confined by inflatable barriers that potentially stopped more
 extensive flooding as depicted by the hazard map.
 In Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Centre-of-town"

\end_inset

, the water can be seen exiting the town to the southeast from two pathways
 at locations 1 and 5 and inundating field-sized areas toward the south;
 a flood path contributing flow toward the southeast was also captured along
 location 7.
\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename Figure 3 Radisson Lake Area.png

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Radisson Lake.
 WDPM output (above) and air photo (below).
\begin_inset CommandInset label
LatexCommand label
name "fig:Radisson-Lake-WDPM"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename Figure 4 Radisson NW of town.png

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Town of Radisson.
 WDPM output (above) and air photo (below).
\begin_inset CommandInset label
LatexCommand label
name "fig:Town-of-Radisson"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename Figure 5 Radisson Town Central Flood Flow.png

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Centre of town of Radisson.
 WDPM output (above) and air photo (below).
\begin_inset CommandInset label
LatexCommand label
name "fig:Centre-of-town"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout

\end_layout

\begin_layout Plain Layout
\begin_inset Graphics
	filename Figure 6 Radisson South of Town.png

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
South of town of Radisson.
 WDPM output (above) and air photo (below).
\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset


\end_layout

\begin_layout Standard
\begin_inset Float figure
wide false
sideways false
status open

\begin_layout Plain Layout
\begin_inset Graphics
	filename Figure 7 Borden Area and Village Central Flood Flow .png

\end_inset


\begin_inset Caption Standard

\begin_layout Plain Layout
Borden region and village.
\begin_inset CommandInset label
LatexCommand label
name "fig:Borden-area-and"

\end_inset


\end_layout

\end_inset


\end_layout

\begin_layout Plain Layout

\end_layout

\end_inset

Results for the village of Borden are shown in Figure
\begin_inset CommandInset ref
LatexCommand ref
reference "fig:Borden-area-and"

\end_inset

.
 Borden receives excess overland flows from the Radisson area.
 Water enters Borden from the southwest along location 1 and flows directly
 through town along location 3 (and to the east toward location 2) to the
 north where a large ponding area can be seen at location 4.
 Water then flows southeast through the town along locations 5 – 7 and turns
 sharply to the east passing under a secondary road (location 8) close to
 the main highway.
 Despite the simplicity of the WDPM simulations, the results are surprisingly
 detailed and the flood hazard map depicts much of the observed flooding
 in the photo accurately.
 When a greater depth of water was applied to the DEM, the gap between locations
 1 and 2 was filled in more accurately.
\end_layout

\begin_layout Standard
The relative accuracy of spatially distributed runoff information for other
 pilot studies has also been verified against runoff masks classified from
 remote sensing imagery and, most importantly, the past experiences of community
 stakeholders.
 The general accuracy and encouraging feedback from the towns of Radisson
 and Borden have served to validate the usefulness of a simple diagnostic
 tool for providing spatially distributed runoff information that has not
 been previous available.
 It may be possible to improve upon the methods further by driving the WDPM
 runoff simulations with estimates generated through a physically based
 modelling framework that considers Prairie cold region hydrological processes
 directly.

\end_layout

\begin_layout Chapter
GNU General Public License
\begin_inset CommandInset label
LatexCommand label
name "chap:Appendix"

\end_inset


\end_layout

\begin_layout Standard
GNU GENERAL PUBLIC LICENSE Version 3, 29 June 2007
\end_layout

\begin_layout Standard
Copyright (C) 2007 Free Software Foundation, Inc.
 <http://fsf.org/> Everyone is permitted to copy and distribute verbatim
 copies of this license document, but changing it is not allowed.
\end_layout

\begin_layout Standard
Preamble
\end_layout

\begin_layout Standard
The GNU General Public License is a free, copyleft license for software
 and other kinds of works.
\end_layout

\begin_layout Standard
The licenses for most software and other practical works are designed to
 take away your freedom to share and change the works.
 By contrast, the GNU General Public License is intended to guarantee your
 freedom to share and change all versions of a program–to make sure it remains
 free software for all its users.
 We, the Free Software Foundation, use the GNU General Public License for
 most of our software; it applies also to any other work released this way
 by its authors.
 You can apply it to your programs, too.
\end_layout

\begin_layout Standard
When we speak of free software, we are referring to freedom, not price.
 Our General Public Licenses are designed to make sure that you have the
 freedom to distribute copies of free software (and charge for them if you
 wish), that you receive source code or can get it if you want it, that
 you can change the software or use pieces of it in new free programs, and
 that you know you can do these things.
\end_layout

\begin_layout Standard
To protect your rights, we need to prevent others from denying you these
 rights or asking you to surrender the rights.
 Therefore, you have certain responsibilities if you distribute copies of
 the software, or if you modify it: responsibilities to respect the freedom
 of others.
\end_layout

\begin_layout Standard
For example, if you distribute copies of such a program, whether gratis
 or for a fee, you must pass on to the recipients the same freedoms that
 you received.
 You must make sure that they, too, receive or can get the source code.
 And you must show them these terms so they know their rights.
\end_layout

\begin_layout Standard
Developers that use the GNU GPL protect your rights with two steps: (1)
 assert copyright on the software, and (2) offer you this License giving
 you legal permission to copy, distribute and/or modify it.
\end_layout

\begin_layout Standard
For the developers' and authors' protection, the GPL clearly explains that
 there is no warranty for this free software.
 For both users' and authors' sake, the GPL requires that modified versions
 be marked as changed, so that their problems will not be attributed erroneously
 to authors of previous versions.
\end_layout

\begin_layout Standard
Some devices are designed to deny users access to install or run modified
 versions of the software inside them, although the manufacturer can do
 so.
 This is fundamentally incompatible with the aim of protecting users' freedom
 to change the software.
 The systematic pattern of such abuse occurs in the area of products for
 individuals to use, which is precisely where it is most unacceptable.
 Therefore, we have designed this version of the GPL to prohibit the practice
 for those products.
 If such problems arise substantially in other domains, we stand ready to
 extend this provision to those domains in future versions of the GPL, as
 needed to protect the freedom of users.
\end_layout

\begin_layout Standard
Finally, every program is threatened constantly by software patents.
 States should not allow patents to restrict development and use of software
 on general-purpose computers, but in those that do, we wish to avoid the
 special danger that patents applied to a free program could make it effectively
 proprietary.
 To prevent this, the GPL assures that patents cannot be used to render
 the program non-free.
\end_layout

\begin_layout Standard
The precise terms and conditions for copying, distribution and modification
 follow.
\end_layout

\begin_layout Standard
TERMS AND CONDITIONS
\end_layout

\begin_layout Standard
0.
 Definitions.
\end_layout

\begin_layout Standard
"This License" refers to version 3 of the GNU General Public License.
\end_layout

\begin_layout Standard
"Copyright" also means copyright-like laws that apply to other kinds of
 works, such as semiconductor masks.
\end_layout

\begin_layout Standard
"The Program" refers to any copyrightable work licensed under this License.
 Each licensee is addressed as "you".
 "Licensees" and "recipients" may be individuals or organizations.
\end_layout

\begin_layout Standard
To "modify" a work means to copy from or adapt all or part of the work in
 a fashion requiring copyright permission, other than the making of an exact
 copy.
 The resulting work is called a "modified version" of the earlier work or
 a work "based on" the earlier work.
\end_layout

\begin_layout Standard
A "covered work" means either the unmodified Program or a work based on
 the Program.
\end_layout

\begin_layout Standard
To "propagate" a work means to do anything with it that, without permission,
 would make you directly or secondarily liable for infringement under applicable
 copyright law, except executing it on a computer or modifying a private
 copy.
 Propagation includes copying, distribution (with or without modification),
 making available to the public, and in some countries other activities
 as well.
\end_layout

\begin_layout Standard
To "convey" a work means any kind of propagation that enables other parties
 to make or receive copies.
 Mere interaction with a user through a computer network, with no transfer
 of a copy, is not conveying.
\end_layout

\begin_layout Standard
An interactive user interface displays "Appropriate Legal Notices" to the
 extent that it includes a convenient and prominently visible feature that
 (1) displays an appropriate copyright notice, and (2) tells the user that
 there is no warranty for the work (except to the extent that warranties
 are provided), that licensees may convey the work under this License, and
 how to view a copy of this License.
 If the interface presents a list of user commands or options, such as a
 menu, a prominent item in the list meets this criterion.
\end_layout

\begin_layout Standard
1.
 Source Code.
\end_layout

\begin_layout Standard
The "source code" for a work means the preferred form of the work for making
 modifications to it.
 "Object code" means any non-source form of a work.
\end_layout

\begin_layout Standard
A "Standard Interface" means an interface that either is an official standard
 defined by a recognized standards body, or, in the case of interfaces specified
 for a particular programming language, one that is widely used among developers
 working in that language.
\end_layout

\begin_layout Standard
The "System Libraries" of an executable work include anything, other than
 the work as a whole, that (a) is included in the normal form of packaging
 a Major Component, but which is not part of that Major Component, and (b)
 serves only to enable use of the work with that Major Component, or to
 implement a Standard Interface for which an implementation is available
 to the public in source code form.
 A "Major Component", in this context, means a major essential component
 (kernel, window system, and so on) of the specific operating system (if
 any) on which the executable work runs, or a compiler used to produce the
 work, or an object code interpreter used to run it.
\end_layout

\begin_layout Standard
The "Corresponding Source" for a work in object code form means all the
 source code needed to generate, install, and (for an executable work) run
 the object code and to modify the work, including scripts to control those
 activities.
 However, it does not include the work's System Libraries, or general-purpose
 tools or generally available free programs which are used unmodified in
 performing those activities but which are not part of the work.
 For example, Corresponding Source includes interface definition files associate
d with source files for the work, and the source code for shared libraries
 and dynamically linked subprograms that the work is specifically designed
 to require, such as by intimate data communication or control flow between
 those subprograms and other parts of the work.
\end_layout

\begin_layout Standard
The Corresponding Source need not include anything that users can regenerate
 automatically from other parts of the Corresponding Source.
\end_layout

\begin_layout Standard
The Corresponding Source for a work in source code form is that same work.
\end_layout

\begin_layout Standard
2.
 Basic Permissions.
\end_layout

\begin_layout Standard
All rights granted under this License are granted for the term of copyright
 on the Program, and are irrevocable provided the stated conditions are
 met.
 This License explicitly affirms your unlimited permission to run the unmodified
 Program.
 The output from running a covered work is covered by this License only
 if the output, given its content, constitutes a covered work.
 This License acknowledges your rights of fair use or other equivalent,
 as provided by copyright law.
\end_layout

\begin_layout Standard
You may make, run and propagate covered works that you do not convey, without
 conditions so long as your license otherwise remains in force.
 You may convey covered works to others for the sole purpose of having them
 make modifications exclusively for you, or provide you with facilities
 for running those works, provided that you comply with the terms of this
 License in conveying all material for which you do not control copyright.
 Those thus making or running the covered works for you must do so exclusively
 on your behalf, under your direction and control, on terms that prohibit
 them from making any copies of your copyrighted material outside their
 relationship with you.
\end_layout

\begin_layout Standard
Conveying under any other circumstances is permitted solely under the conditions
 stated below.
 Sublicensing is not allowed; section 10 makes it unnecessary.
\end_layout

\begin_layout Standard
3.
 Protecting Users' Legal Rights From Anti-Circumvention Law.
\end_layout

\begin_layout Standard
No covered work shall be deemed part of an effective technological measure
 under any applicable law fulfilling obligations under article 11 of the
 WIPO copyright treaty adopted on 20 December 1996, or similar laws prohibiting
 or restricting circumvention of such measures.
\end_layout

\begin_layout Standard
When you convey a covered work, you waive any legal power to forbid circumventio
n of technological measures to the extent such circumvention is effected
 by exercising rights under this License with respect to the covered work,
 and you disclaim any intention to limit operation or modification of the
 work as a means of enforcing, against the work's users, your or third parties'
 legal rights to forbid circumvention of technological measures.
\end_layout

\begin_layout Standard
4.
 Conveying Verbatim Copies.
\end_layout

\begin_layout Standard
You may convey verbatim copies of the Program's source code as you receive
 it, in any medium, provided that you conspicuously and appropriately publish
 on each copy an appropriate copyright notice; keep intact all notices stating
 that this License and any non-permissive terms added in accord with section
 7 apply to the code; keep intact all notices of the absence of any warranty;
 and give all recipients a copy of this License along with the Program.
\end_layout

\begin_layout Standard
You may charge any price or no price for each copy that you convey, and
 you may offer support or warranty protection for a fee.
\end_layout

\begin_layout Standard
5.
 Conveying Modified Source Versions.
\end_layout

\begin_layout Standard
You may convey a work based on the Program, or the modifications to produce
 it from the Program, in the form of source code under the terms of section
 4, provided that you also meet all of these conditions:
\end_layout

\begin_layout Standard
a) The work must carry prominent notices stating that you modified it, and
 giving a relevant date.
\end_layout

\begin_layout Standard
b) The work must carry prominent notices stating that it is released under
 this License and any conditions added under section 7.
 This requirement modifies the requirement in section 4 to "keep intact
 all notices".
\end_layout

\begin_layout Standard
c) You must license the entire work, as a whole, under this License to anyone
 who comes into possession of a copy.
 This License will therefore apply, along with any applicable section 7
 additional terms, to the whole of the work, and all its parts, regardless
 of how they are packaged.
 This License gives no permission to license the work in any other way,
 but it does not invalidate such permission if you have separately received
 it.
\end_layout

\begin_layout Standard
d) If the work has interactive user interfaces, each must display Appropriate
 Legal Notices; however, if the Program has interactive interfaces that
 do not display Appropriate Legal Notices, your work need not make them
 do so.
\end_layout

\begin_layout Standard
A compilation of a covered work with other separate and independent works,
 which are not by their nature extensions of the covered work, and which
 are not combined with it such as to form a larger program, in or on a volume
 of a storage or distribution medium, is called an "aggregate" if the compilatio
n and its resulting copyright are not used to limit the access or legal
 rights of the compilation's users beyond what the individual works permit.
 Inclusion of a covered work in an aggregate does not cause this License
 to apply to the other parts of the aggregate.
\end_layout

\begin_layout Standard
6.
 Conveying Non-Source Forms.
\end_layout

\begin_layout Standard
You may convey a covered work in object code form under the terms of sections
 4 and 5, provided that you also convey the machine-readable Corresponding
 Source under the terms of this License, in one of these ways:
\end_layout

\begin_layout Standard
a) Convey the object code in, or embodied in, a physical product (including
 a physical distribution medium), accompanied by the Corresponding Source
 fixed on a durable physical medium customarily used for software interchange.
\end_layout

\begin_layout Standard
b) Convey the object code in, or embodied in, a physical product (including
 a physical distribution medium), accompanied by a written offer, valid
 for at least three years and valid for as long as you offer spare parts
 or customer support for that product model, to give anyone who possesses
 the object code either (1) a copy of the Corresponding Source for all the
 software in the product that is covered by this License, on a durable physical
 medium customarily used for software interchange, for a price no more than
 your reasonable cost of physically performing this conveying of source,
 or (2) access to copy the Corresponding Source from a network server at
 no charge.
\end_layout

\begin_layout Standard
c) Convey individual copies of the object code with a copy of the written
 offer to provide the Corresponding Source.
 This alternative is allowed only occasionally and noncommercially, and
 only if you received the object code with such an offer, in accord with
 subsection 6b.
\end_layout

\begin_layout Standard
d) Convey the object code by offering access from a designated place (gratis
 or for a charge), and offer equivalent access to the Corresponding Source
 in the same way through the same place at no further charge.
 You need not require recipients to copy the Corresponding Source along
 with the object code.
 If the place to copy the object code is a network server, the Corresponding
 Source may be on a different server (operated by you or a third party)
 that supports equivalent copying facilities, provided you maintain clear
 directions next to the object code saying where to find the Corresponding
 Source.
 Regardless of what server hosts the Corresponding Source, you remain obligated
 to ensure that it is available for as long as needed to satisfy these requireme
nts.
\end_layout

\begin_layout Standard
e) Convey the object code using peer-to-peer transmission, provided you
 inform other peers where the object code and Corresponding Source of the
 work are being offered to the general public at no charge under subsection
 6d.
\end_layout

\begin_layout Standard
A separable portion of the object code, whose source code is excluded from
 the Corresponding Source as a System Library, need not be included in conveying
 the object code work.
\end_layout

\begin_layout Standard
A "User Product" is either (1) a "consumer product", which means any tangible
 personal property which is normally used for personal, family, or household
 purposes, or (2) anything designed or sold for incorporation into a dwelling.
 In determining whether a product is a consumer product, doubtful cases
 shall be resolved in favor of coverage.
 For a particular product received by a particular user, "normally used"
 refers to a typical or common use of that class of product, regardless
 of the status of the particular user or of the way in which the particular
 user actually uses, or expects or is expected to use, the product.
 A product is a consumer product regardless of whether the product has substanti
al commercial, industrial or non-consumer uses, unless such uses represent
 the only significant mode of use of the product.
\end_layout

\begin_layout Standard
"Installation Information" for a User Product means any methods, procedures,
 authorization keys, or other information required to install and execute
 modified versions of a covered work in that User Product from a modified
 version of its Corresponding Source.
 The information must suffice to ensure that the continued functioning of
 the modified object code is in no case prevented or interfered with solely
 because modification has been made.
\end_layout

\begin_layout Standard
If you convey an object code work under this section in, or with, or specificall
y for use in, a User Product, and the conveying occurs as part of a transaction
 in which the right of possession and use of the User Product is transferred
 to the recipient in perpetuity or for a fixed term (regardless of how the
 transaction is characterized), the Corresponding Source conveyed under
 this section must be accompanied by the Installation Information.
 But this requirement does not apply if neither you nor any third party
 retains the ability to install modified object code on the User Product
 (for example, the work has been installed in ROM).
\end_layout

\begin_layout Standard
The requirement to provide Installation Information does not include a requireme
nt to continue to provide support service, warranty, or updates for a work
 that has been modified or installed by the recipient, or for the User Product
 in which it has been modified or installed.
 Access to a network may be denied when the modification itself materially
 and adversely affects the operation of the network or violates the rules
 and protocols for communication across the network.
\end_layout

\begin_layout Standard
Corresponding Source conveyed, and Installation Information provided, in
 accord with this section must be in a format that is publicly documented
 (and with an implementation available to the public in source code form),
 and must require no special password or key for unpacking, reading or copying.
\end_layout

\begin_layout Standard
7.
 Additional Terms.
\end_layout

\begin_layout Standard
"Additional permissions" are terms that supplement the terms of this License
 by making exceptions from one or more of its conditions.
 Additional permissions that are applicable to the entire Program shall
 be treated as though they were included in this License, to the extent
 that they are valid under applicable law.
 If additional permissions apply only to part of the Program, that part
 may be used separately under those permissions, but the entire Program
 remains governed by this License without regard to the additional permissions.
\end_layout

\begin_layout Standard
When you convey a copy of a covered work, you may at your option remove
 any additional permissions from that copy, or from any part of it.
 (Additional permissions may be written to require their own removal in
 certain cases when you modify the work.) You may place additional permissions
 on material, added by you to a covered work, for which you have or can
 give appropriate copyright permission.
\end_layout

\begin_layout Standard
Notwithstanding any other provision of this License, for material you add
 to a covered work, you may (if authorized by the copyright holders of that
 material) supplement the terms of this License with terms:
\end_layout

\begin_layout Standard
a) Disclaiming warranty or limiting liability differently from the terms
 of sections 15 and 16 of this License; or
\end_layout

\begin_layout Standard
b) Requiring preservation of specified reasonable legal notices or author
 attributions in that material or in the Appropriate Legal Notices displayed
 by works containing it; or
\end_layout

\begin_layout Standard
c) Prohibiting misrepresentation of the origin of that material, or requiring
 that modified versions of such material be marked in reasonable ways as
 different from the original version; or
\end_layout

\begin_layout Standard
d) Limiting the use for publicity purposes of names of licensors or authors
 of the material; or
\end_layout

\begin_layout Standard
e) Declining to grant rights under trademark law for use of some trade names,
 trademarks, or service marks; or
\end_layout

\begin_layout Standard
f) Requiring indemnification of licensors and authors of that material by
 anyone who conveys the material (or modified versions of it) with contractual
 assumptions of liability to the recipient, for any liability that these
 contractual assumptions directly impose on those licensors and authors.
\end_layout

\begin_layout Standard
All other non-permissive additional terms are considered "further restrictions"
 within the meaning of section 10.
 If the Program as you received it, or any part of it, contains a notice
 stating that it is governed by this License along with a term that is a
 further restriction, you may remove that term.
 If a license document contains a further restriction but permits relicensing
 or conveying under this License, you may add to a covered work material
 governed by the terms of that license document, provided that the further
 restriction does not survive such relicensing or conveying.
\end_layout

\begin_layout Standard
If you add terms to a covered work in accord with this section, you must
 place, in the relevant source files, a statement of the additional terms
 that apply to those files, or a notice indicating where to find the applicable
 terms.
\end_layout

\begin_layout Standard
Additional terms, permissive or non-permissive, may be stated in the form
 of a separately written license, or stated as exceptions; the above requirement
s apply either way.
\end_layout

\begin_layout Standard
8.
 Termination.
\end_layout

\begin_layout Standard
You may not propagate or modify a covered work except as expressly provided
 under this License.
 Any attempt otherwise to propagate or modify it is void, and will automatically
 terminate your rights under this License (including any patent licenses
 granted under the third paragraph of section 11).
\end_layout

\begin_layout Standard
However, if you cease all violation of this License, then your license from
 a particular copyright holder is reinstated (a) provisionally, unless and
 until the copyright holder explicitly and finally terminates your license,
 and (b) permanently, if the copyright holder fails to notify you of the
 violation by some reasonable means prior to 60 days after the cessation.
\end_layout

\begin_layout Standard
Moreover, your license from a particular copyright holder is reinstated
 permanently if the copyright holder notifies you of the violation by some
 reasonable means, this is the first time you have received notice of violation
 of this License (for any work) from that copyright holder, and you cure
 the violation prior to 30 days after your receipt of the notice.
\end_layout

\begin_layout Standard
Termination of your rights under this section does not terminate the licenses
 of parties who have received copies or rights from you under this License.
 If your rights have been terminated and not permanently reinstated, you
 do not qualify to receive new licenses for the same material under section
 10.
\end_layout

\begin_layout Standard
9.
 Acceptance Not Required for Having Copies.
\end_layout

\begin_layout Standard
You are not required to accept this License in order to receive or run a
 copy of the Program.
 Ancillary propagation of a covered work occurring solely as a consequence
 of using peer-to-peer transmission to receive a copy likewise does not
 require acceptance.
 However, nothing other than this License grants you permission to propagate
 or modify any covered work.
 These actions infringe copyright if you do not accept this License.
 Therefore, by modifying or propagating a covered work, you indicate your
 acceptance of this License to do so.
\end_layout

\begin_layout Standard
10.
 Automatic Licensing of Downstream Recipients.
\end_layout

\begin_layout Standard
Each time you convey a covered work, the recipient automatically receives
 a license from the original licensors, to run, modify and propagate that
 work, subject to this License.
 You are not responsible for enforcing compliance by third parties with
 this License.
\end_layout

\begin_layout Standard
An "entity transaction" is a transaction transferring control of an organization
, or substantially all assets of one, or subdividing an organization, or
 merging organizations.
 If propagation of a covered work results from an entity transaction, each
 party to that transaction who receives a copy of the work also receives
 whatever licenses to the work the party's predecessor in interest had or
 could give under the previous paragraph, plus a right to possession of
 the Corresponding Source of the work from the predecessor in interest,
 if the predecessor has it or can get it with reasonable efforts.
\end_layout

\begin_layout Standard
You may not impose any further restrictions on the exercise of the rights
 granted or affirmed under this License.
 For example, you may not impose a license fee, royalty, or other charge
 for exercise of rights granted under this License, and you may not initiate
 litigation (including a cross-claim or counterclaim in a lawsuit) alleging
 that any patent claim is infringed by making, using, selling, offering
 for sale, or importing the Program or any portion of it.
\end_layout

\begin_layout Standard
11.
 Patents.
\end_layout

\begin_layout Standard
A "contributor" is a copyright holder who authorizes use under this License
 of the Program or a work on which the Program is based.
 The work thus licensed is called the contributor's "contributor version".
\end_layout

\begin_layout Standard
A contributor's "essential patent claims" are all patent claims owned or
 controlled by the contributor, whether already acquired or hereafter acquired,
 that would be infringed by some manner, permitted by this License, of making,
 using, or selling its contributor version, but do not include claims that
 would be infringed only as a consequence of further modification of the
 contributor version.
 For purposes of this definition, "control" includes the right to grant
 patent sublicenses in a manner consistent with the requirements of this
 License.
\end_layout

\begin_layout Standard
Each contributor grants you a non-exclusive, worldwide, royalty-free patent
 license under the contributor's essential patent claims, to make, use,
 sell, offer for sale, import and otherwise run, modify and propagate the
 contents of its contributor version.
\end_layout

\begin_layout Standard
In the following three paragraphs, a "patent license" is any express agreement
 or commitment, however denominated, not to enforce a patent (such as an
 express permission to practice a patent or covenant not to sue for patent
 infringement).
 To "grant" such a patent license to a party means to make such an agreement
 or commitment not to enforce a patent against the party.
\end_layout

\begin_layout Standard
If you convey a covered work, knowingly relying on a patent license, and
 the Corresponding Source of the work is not available for anyone to copy,
 free of charge and under the terms of this License, through a publicly
 available network server or other readily accessible means, then you must
 either (1) cause the Corresponding Source to be so available, or (2) arrange
 to deprive yourself of the benefit of the patent license for this particular
 work, or (3) arrange, in a manner consistent with the requirements of this
 License, to extend the patent license to downstream recipients.
 "Knowingly relying" means you have actual knowledge that, but for the patent
 license, your conveying the covered work in a country, or your recipient's
 use of the covered work in a country, would infringe one or more identifiable
 patents in that country that you have reason to believe are valid.
\end_layout

\begin_layout Standard
If, pursuant to or in connection with a single transaction or arrangement,
 you convey, or propagate by procuring conveyance of, a covered work, and
 grant a patent license to some of the parties receiving the covered work
 authorizing them to use, propagate, modify or convey a specific copy of
 the covered work, then the patent license you grant is automatically extended
 to all recipients of the covered work and works based on it.
\end_layout

\begin_layout Standard
A patent license is "discriminatory" if it does not include within the scope
 of its coverage, prohibits the exercise of, or is conditioned on the non-exerci
se of one or more of the rights that are specifically granted under this
 License.
 You may not convey a covered work if you are a party to an arrangement
 with a third party that is in the business of distributing software, under
 which you make payment to the third party based on the extent of your activity
 of conveying the work, and under which the third party grants, to any of
 the parties who would receive the covered work from you, a discriminatory
 patent license (a) in connection with copies of the covered work conveyed
 by you (or copies made from those copies), or (b) primarily for and in
 connection with specific products or compilations that contain the covered
 work, unless you entered into that arrangement, or that patent license
 was granted, prior to 28 March 2007.
\end_layout

\begin_layout Standard
Nothing in this License shall be construed as excluding or limiting any
 implied license or other defenses to infringement that may otherwise be
 available to you under applicable patent law.
\end_layout

\begin_layout Standard
12.
 No Surrender of Others' Freedom.
\end_layout

\begin_layout Standard
If conditions are imposed on you (whether by court order, agreement or otherwise
) that contradict the conditions of this License, they do not excuse you
 from the conditions of this License.
 If you cannot convey a covered work so as to satisfy simultaneously your
 obligations under this License and any other pertinent obligations, then
 as a consequence you may not convey it at all.
 For example, if you agree to terms that obligate you to collect a royalty
 for further conveying from those to whom you convey the Program, the only
 way you could satisfy both those terms and this License would be to refrain
 entirely from conveying the Program.
\end_layout

\begin_layout Standard
13.
 Use with the GNU Affero General Public License.
\end_layout

\begin_layout Standard
Notwithstanding any other provision of this License, you have permission
 to link or combine any covered work with a work licensed under version
 3 of the GNU Affero General Public License into a single combined work,
 and to convey the resulting work.
 The terms of this License will continue to apply to the part which is the
 covered work, but the special requirements of the GNU Affero General Public
 License, section 13, concerning interaction through a network will apply
 to the combination as such.
\end_layout

\begin_layout Standard
14.
 Revised Versions of this License.
\end_layout

\begin_layout Standard
The Free Software Foundation may publish revised and/or new versions of
 the GNU General Public License from time to time.
 Such new versions will be similar in spirit to the present version, but
 may differ in detail to address new problems or concerns.
\end_layout

\begin_layout Standard
Each version is given a distinguishing version number.
 If the Program specifies that a certain numbered version of the GNU General
 Public License "or any later version" applies to it, you have the option
 of following the terms and conditions either of that numbered version or
 of any later version published by the Free Software Foundation.
 If the Program does not specify a version number of the GNU General Public
 License, you may choose any version ever published by the Free Software
 Foundation.
\end_layout

\begin_layout Standard
If the Program specifies that a proxy can decide which future versions of
 the GNU General Public License can be used, that proxy's public statement
 of acceptance of a version permanently authorizes you to choose that version
 for the Program.
\end_layout

\begin_layout Standard
Later license versions may give you additional or different permissions.
 However, no additional obligations are imposed on any author or copyright
 holder as a result of your choosing to follow a later version.
\end_layout

\begin_layout Standard
15.
 Disclaimer of Warranty.
\end_layout

\begin_layout Standard
THERE IS NO WARRANTY FOR THE PROGRAM, TO THE EXTENT PERMITTED BY APPLICABLE
 LAW.
 EXCEPT WHEN OTHERWISE STATED IN WRITING THE COPYRIGHT HOLDERS AND/OR OTHER
 PARTIES PROVIDE THE PROGRAM "AS IS" WITHOUT WARRANTY OF ANY KIND, EITHER
 EXPRESSED OR IMPLIED, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES
 OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE.
 THE ENTIRE RISK AS TO THE QUALITY AND PERFORMANCE OF THE PROGRAM IS WITH
 YOU.
 SHOULD THE PROGRAM PROVE DEFECTIVE, YOU ASSUME THE COST OF ALL NECESSARY
 SERVICING, REPAIR OR CORRECTION.
\end_layout

\begin_layout Standard
16.
 Limitation of Liability.
\end_layout

\begin_layout Standard
IN NO EVENT UNLESS REQUIRED BY APPLICABLE LAW OR AGREED TO IN WRITING WILL
 ANY COPYRIGHT HOLDER, OR ANY OTHER PARTY WHO MODIFIES AND/OR CONVEYS THE
 PROGRAM AS PERMITTED ABOVE, BE LIABLE TO YOU FOR DAMAGES, INCLUDING ANY
 GENERAL, SPECIAL, INCIDENTAL OR CONSEQUENTIAL DAMAGES ARISING OUT OF THE
 USE OR INABILITY TO USE THE PROGRAM (INCLUDING BUT NOT LIMITED TO LOSS
 OF DATA OR DATA BEING RENDERED INACCURATE OR LOSSES SUSTAINED BY YOU OR
 THIRD PARTIES OR A FAILURE OF THE PROGRAM TO OPERATE WITH ANY OTHER PROGRAMS),
 EVEN IF SUCH HOLDER OR OTHER PARTY HAS BEEN ADVISED OF THE POSSIBILITY
 OF SUCH DAMAGES.
\end_layout

\begin_layout Standard
17.
 Interpretation of Sections 15 and 16.
\end_layout

\begin_layout Standard
If the disclaimer of warranty and limitation of liability provided above
 cannot be given local legal effect according to their terms, reviewing
 courts shall apply local law that most closely approximates an absolute
 waiver of all civil liability in connection with the Program, unless a
 warranty or assumption of liability accompanies a copy of the Program in
 return for a fee.
\end_layout

\begin_layout Standard
END OF TERMS AND CONDITIONS
\end_layout

\begin_layout Standard
How to Apply These Terms to Your New Programs
\end_layout

\begin_layout Standard
If you develop a new program, and you want it to be of the greatest possible
 use to the public, the best way to achieve this is to make it free software
 which everyone can redistribute and change under these terms.
\end_layout

\begin_layout Standard
To do so, attach the following notices to the program.
 It is safest to attach them to the start of each source file to most effectivel
y state the exclusion of warranty; and each file should have at least the
 "copyright" line and a pointer to where the full notice is found.
\end_layout

\begin_layout Standard
<one line to give the program's name and a brief idea of what it does.> Copyright
 (C) <year> <name of author>
\end_layout

\begin_layout Standard
This program is free software: you can redistribute it and/or modify it
 under the terms of the GNU General Public License as published by the Free
 Software Foundation, either version 3 of the License, or (at your option)
 any later version.
\end_layout

\begin_layout Standard
This program is distributed in the hope that it will be useful, but WITHOUT
 ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS
 FOR A PARTICULAR PURPOSE.
 See the GNU General Public License for more details.
\end_layout

\begin_layout Standard
You should have received a copy of the GNU General Public License along
 with this program.
 If not, see <http://www.gnu.org/licenses/>.
\end_layout

\begin_layout Standard
Also add information on how to contact you by electronic and paper mail.
\end_layout

\begin_layout Standard
If the program does terminal interaction, make it output a short notice
 like this when it starts in an interactive mode:
\end_layout

\begin_layout Standard
<program> Copyright (C) <year> <name of author> This program comes with
 ABSOLUTELY NO WARRANTY; for details type `show w'.
 This is free software, and you are welcome to redistribute it under certain
 conditions; type `show c' for details.
\end_layout

\begin_layout Standard
The hypothetical commands `show w' and `show c' should show the appropriate
 parts of the General Public License.
 Of course, your program's commands might be different; for a GUI interface,
 you would use an "about box".
\end_layout

\begin_layout Standard
You should also get your employer (if you work as a programmer) or school,
 if any, to sign a "copyright disclaimer" for the program, if necessary.
 For more information on this, and how to apply and follow the GNU GPL,
 see <http://www.gnu.org/licenses/>.
\end_layout

\begin_layout Standard
The GNU General Public License does not permit incorporating your program
 into proprietary programs.
 If your program is a subroutine library, you may consider it more useful
 to permit linking proprietary applications with the library.
 If this is what you want to do, use the GNU Lesser General Public License
 instead of this License.
 But first, please read <http://www.gnu.org/philosophy/why-not-lgpl.html>.
\end_layout

\begin_layout Chapter
GNU Free Documentation License
\end_layout

\begin_layout Standard
GNU Free Documentation License Version 1.3, 3 November 2008
\end_layout

\begin_layout Standard
Copyright (C) 2000, 2001, 2002, 2007, 2008 Free Software Foundation, Inc.
 <http://fsf.org/> Everyone is permitted to copy and distribute verbatim
 copies of this license document, but changing it is not allowed.
\end_layout

\begin_layout Standard
0.
 PREAMBLE
\end_layout

\begin_layout Standard
The purpose of this License is to make a manual, textbook, or other functional
 and useful document "free" in the sense of freedom: to assure everyone
 the effective freedom to copy and redistribute it, with or without modifying
 it, either commercially or noncommercially.
 Secondarily, this License preserves for the author and publisher a way
 to get credit for their work, while not being considered responsible for
 modifications made by others.
\end_layout

\begin_layout Standard
This License is a kind of "copyleft", which means that derivative works
 of the document must themselves be free in the same sense.
 It complements the GNU General Public License, which is a copyleft license
 designed for free software.
\end_layout

\begin_layout Standard
We have designed this License in order to use it for manuals for free software,
 because free software needs free documentation: a free program should come
 with manuals providing the same freedoms that the software does.
 But this License is not limited to software manuals; it can be used for
 any textual work, regardless of subject matter or whether it is published
 as a printed book.
 We recommend this License principally for works whose purpose is instruction
 or reference.
\end_layout

\begin_layout Standard
1.
 APPLICABILITY AND DEFINITIONS
\end_layout

\begin_layout Standard
This License applies to any manual or other work, in any medium, that contains
 a notice placed by the copyright holder saying it can be distributed under
 the terms of this License.
 Such a notice grants a world-wide, royalty-free license, unlimited in duration,
 to use that work under the conditions stated herein.
 The "Document", below, refers to any such manual or work.
 Any member of the public is a licensee, and is addressed as "you".
 You accept the license if you copy, modify or distribute the work in a
 way requiring permission under copyright law.
\end_layout

\begin_layout Standard
A "Modified Version" of the Document means any work containing the Document
 or a portion of it, either copied verbatim, or with modifications and/or
 translated into another language.
\end_layout

\begin_layout Standard
A "Secondary Section" is a named appendix or a front-matter section of the
 Document that deals exclusively with the relationship of the publishers
 or authors of the Document to the Document's overall subject (or to related
 matters) and contains nothing that could fall directly within that overall
 subject.
 (Thus, if the Document is in part a textbook of mathematics, a Secondary
 Section may not explain any mathematics.) The relationship could be a matter
 of historical connection with the subject or with related matters, or of
 legal, commercial, philosophical, ethical or political position regarding
 them.
\end_layout

\begin_layout Standard
The "Invariant Sections" are certain Secondary Sections whose titles are
 designated, as being those of Invariant Sections, in the notice that says
 that the Document is released under this License.
 If a section does not fit the above definition of Secondary then it is
 not allowed to be designated as Invariant.
 The Document may contain zero Invariant Sections.
 If the Document does not identify any Invariant Sections then there are
 none.
\end_layout

\begin_layout Standard
The "Cover Texts" are certain short passages of text that are listed, as
 Front-Cover Texts or Back-Cover Texts, in the notice that says that the
 Document is released under this License.
 A Front-Cover Text may be at most 5 words, and a Back-Cover Text may be
 at most 25 words.
\end_layout

\begin_layout Standard
A "Transparent" copy of the Document means a machine-readable copy, represented
 in a format whose specification is available to the general public, that
 is suitable for revising the document straightforwardly with generic text
 editors or (for images composed of pixels) generic paint programs or (for
 drawings) some widely available drawing editor, and that is suitable for
 input to text formatters or for automatic translation to a variety of formats
 suitable for input to text formatters.
 A copy made in an otherwise Transparent file format whose markup, or absence
 of markup, has been arranged to thwart or discourage subsequent modification
 by readers is not Transparent.
 An image format is not Transparent if used for any substantial amount of
 text.
 A copy that is not "Transparent" is called "Opaque".
\end_layout

\begin_layout Standard
Examples of suitable formats for Transparent copies include plain ASCII
 without markup, Texinfo input format, \SpecialChar LaTeX
 input format, SGML or XML using
 a publicly available DTD, and standard-conforming simple HTML, PostScript
 or PDF designed for human modification.
 Examples of transparent image formats include PNG, XCF and JPG.
 Opaque formats include proprietary formats that can be read and edited
 only by proprietary word processors, SGML or XML for which the DTD and/or
 processing tools are not generally available, and the machine-generated
 HTML, PostScript or PDF produced by some word processors for output purposes
 only.
\end_layout

\begin_layout Standard
The "Title Page" means, for a printed book, the title page itself, plus
 such following pages as are needed to hold, legibly, the material this
 License requires to appear in the title page.
 For works in formats which do not have any title page as such, "Title Page"
 means the text near the most prominent appearance of the work's title,
 preceding the beginning of the body of the text.
\end_layout

\begin_layout Standard
The "publisher" means any person or entity that distributes copies of the
 Document to the public.
\end_layout

\begin_layout Standard
A section "Entitled XYZ" means a named subunit of the Document whose title
 either is precisely XYZ or contains XYZ in parentheses following text that
 translates XYZ in another language.
 (Here XYZ stands for a specific section name mentioned below, such as "Acknowle
dgements", "Dedications", "Endorsements", or "History".) To "Preserve the
 Title" of such a section when you modify the Document means that it remains
 a section "Entitled XYZ" according to this definition.
\end_layout

\begin_layout Standard
The Document may include Warranty Disclaimers next to the notice which states
 that this License applies to the Document.
 These Warranty Disclaimers are considered to be included by reference in
 this License, but only as regards disclaiming warranties: any other implication
 that these Warranty Disclaimers may have is void and has no effect on the
 meaning of this License.
\end_layout

\begin_layout Standard
2.
 VERBATIM COPYING
\end_layout

\begin_layout Standard
You may copy and distribute the Document in any medium, either commercially
 or noncommercially, provided that this License, the copyright notices,
 and the license notice saying this License applies to the Document are
 reproduced in all copies, and that you add no other conditions whatsoever
 to those of this License.
 You may not use technical measures to obstruct or control the reading or
 further copying of the copies you make or distribute.
 However, you may accept compensation in exchange for copies.
 If you distribute a large enough number of copies you must also follow
 the conditions in section 3.
\end_layout

\begin_layout Standard
You may also lend copies, under the same conditions stated above, and you
 may publicly display copies.
\end_layout

\begin_layout Standard
3.
 COPYING IN QUANTITY
\end_layout

\begin_layout Standard
If you publish printed copies (or copies in media that commonly have printed
 covers) of the Document, numbering more than 100, and the Document's license
 notice requires Cover Texts, you must enclose the copies in covers that
 carry, clearly and legibly, all these Cover Texts: Front-Cover Texts on
 the front cover, and Back-Cover Texts on the back cover.
 Both covers must also clearly and legibly identify you as the publisher
 of these copies.
 The front cover must present the full title with all words of the title
 equally prominent and visible.
 You may add other material on the covers in addition.
 Copying with changes limited to the covers, as long as they preserve the
 title of the Document and satisfy these conditions, can be treated as verbatim
 copying in other respects.
\end_layout

\begin_layout Standard
If the required texts for either cover are too voluminous to fit legibly,
 you should put the first ones listed (as many as fit reasonably) on the
 actual cover, and continue the rest onto adjacent pages.
\end_layout

\begin_layout Standard
If you publish or distribute Opaque copies of the Document numbering more
 than 100, you must either include a machine-readable Transparent copy along
 with each Opaque copy, or state in or with each Opaque copy a computer-network
 location from which the general network-using public has access to download
 using public-standard network protocols a complete Transparent copy of
 the Document, free of added material.
 If you use the latter option, you must take reasonably prudent steps, when
 you begin distribution of Opaque copies in quantity, to ensure that this
 Transparent copy will remain thus accessible at the stated location until
 at least one year after the last time you distribute an Opaque copy (directly
 or through your agents or retailers) of that edition to the public.
\end_layout

\begin_layout Standard
It is requested, but not required, that you contact the authors of the Document
 well before redistributing any large number of copies, to give them a chance
 to provide you with an updated version of the Document.
\end_layout

\begin_layout Standard
4.
 MODIFICATIONS
\end_layout

\begin_layout Standard
You may copy and distribute a Modified Version of the Document under the
 conditions of sections 2 and 3 above, provided that you release the Modified
 Version under precisely this License, with the Modified Version filling
 the role of the Document, thus licensing distribution and modification
 of the Modified Version to whoever possesses a copy of it.
 In addition, you must do these things in the Modified Version:
\end_layout

\begin_layout Standard
A.
 Use in the Title Page (and on the covers, if any) a title distinct from
 that of the Document, and from those of previous versions (which should,
 if there were any, be listed in the History section of the Document).
 You may use the same title as a previous version if the original publisher
 of that version gives permission.
 B.
 List on the Title Page, as authors, one or more persons or entities responsible
 for authorship of the modifications in the Modified Version, together with
 at least five of the principal authors of the Document (all of its principal
 authors, if it has fewer than five), unless they release you from this
 requirement.
 C.
 State on the Title page the name of the publisher of the Modified Version,
 as the publisher.
 D.
 Preserve all the copyright notices of the Document.
 E.
 Add an appropriate copyright notice for your modifications adjacent to
 the other copyright notices.
 F.
 Include, immediately after the copyright notices, a license notice giving
 the public permission to use the Modified Version under the terms of this
 License, in the form shown in the Addendum below.
 G.
 Preserve in that license notice the full lists of Invariant Sections and
 required Cover Texts given in the Document's license notice.
 H.
 Include an unaltered copy of this License.
 I.
 Preserve the section Entitled "History", Preserve its Title, and add to
 it an item stating at least the title, year, new authors, and publisher
 of the Modified Version as given on the Title Page.
 If there is no section Entitled "History" in the Document, create one stating
 the title, year, authors, and publisher of the Document as given on its
 Title Page, then add an item describing the Modified Version as stated
 in the previous sentence.
 J.
 Preserve the network location, if any, given in the Document for public
 access to a Transparent copy of the Document, and likewise the network
 locations given in the Document for previous versions it was based on.
 These may be placed in the "History" section.
 You may omit a network location for a work that was published at least
 four years before the Document itself, or if the original publisher of
 the version it refers to gives permission.
 K.
 For any section Entitled "Acknowledgements" or "Dedications", Preserve
 the Title of the section, and preserve in the section all the substance
 and tone of each of the contributor acknowledgements and/or dedications
 given therein.
 L.
 Preserve all the Invariant Sections of the Document, unaltered in their
 text and in their titles.
 Section numbers or the equivalent are not considered part of the section
 titles.
 M.
 Delete any section Entitled "Endorsements".
 Such a section may not be included in the Modified Version.
 N.
 Do not retitle any existing section to be Entitled "Endorsements" or to
 conflict in title with any Invariant Section.
 O.
 Preserve any Warranty Disclaimers.
\end_layout

\begin_layout Standard
If the Modified Version includes new front-matter sections or appendices
 that qualify as Secondary Sections and contain no material copied from
 the Document, you may at your option designate some or all of these sections
 as invariant.
 To do this, add their titles to the list of Invariant Sections in the Modified
 Version's license notice.
 These titles must be distinct from any other section titles.
\end_layout

\begin_layout Standard
You may add a section Entitled "Endorsements", provided it contains nothing
 but endorsements of your Modified Version by various parties–for example,
 statements of peer review or that the text has been approved by an organization
 as the authoritative definition of a standard.
\end_layout

\begin_layout Standard
You may add a passage of up to five words as a Front-Cover Text, and a passage
 of up to 25 words as a Back-Cover Text, to the end of the list of Cover
 Texts in the Modified Version.
 Only one passage of Front-Cover Text and one of Back-Cover Text may be
 added by (or through arrangements made by) any one entity.
 If the Document already includes a cover text for the same cover, previously
 added by you or by arrangement made by the same entity you are acting on
 behalf of, you may not add another; but you may replace the old one, on
 explicit permission from the previous publisher that added the old one.
\end_layout

\begin_layout Standard
The author(s) and publisher(s) of the Document do not by this License give
 permission to use their names for publicity for or to assert or imply endorseme
nt of any Modified Version.
\end_layout

\begin_layout Standard
5.
 COMBINING DOCUMENTS
\end_layout

\begin_layout Standard
You may combine the Document with other documents released under this License,
 under the terms defined in section 4 above for modified versions, provided
 that you include in the combination all of the Invariant Sections of all
 of the original documents, unmodified, and list them all as Invariant Sections
 of your combined work in its license notice, and that you preserve all
 their Warranty Disclaimers.
\end_layout

\begin_layout Standard
The combined work need only contain one copy of this License, and multiple
 identical Invariant Sections may be replaced with a single copy.
 If there are multiple Invariant Sections with the same name but different
 contents, make the title of each such section unique by adding at the end
 of it, in parentheses, the name of the original author or publisher of
 that section if known, or else a unique number.
 Make the same adjustment to the section titles in the list of Invariant
 Sections in the license notice of the combined work.
\end_layout

\begin_layout Standard
In the combination, you must combine any sections Entitled "History" in
 the various original documents, forming one section Entitled "History";
 likewise combine any sections Entitled "Acknowledgements", and any sections
 Entitled "Dedications".
 You must delete all sections Entitled "Endorsements".
\end_layout

\begin_layout Standard
6.
 COLLECTIONS OF DOCUMENTS
\end_layout

\begin_layout Standard
You may make a collection consisting of the Document and other documents
 released under this License, and replace the individual copies of this
 License in the various documents with a single copy that is included in
 the collection, provided that you follow the rules of this License for
 verbatim copying of each of the documents in all other respects.
\end_layout

\begin_layout Standard
You may extract a single document from such a collection, and distribute
 it individually under this License, provided you insert a copy of this
 License into the extracted document, and follow this License in all other
 respects regarding verbatim copying of that document.
\end_layout

\begin_layout Standard
7.
 AGGREGATION WITH INDEPENDENT WORKS
\end_layout

\begin_layout Standard
A compilation of the Document or its derivatives with other separate and
 independent documents or works, in or on a volume of a storage or distribution
 medium, is called an "aggregate" if the copyright resulting from the compilatio
n is not used to limit the legal rights of the compilation's users beyond
 what the individual works permit.
 When the Document is included in an aggregate, this License does not apply
 to the other works in the aggregate which are not themselves derivative
 works of the Document.
\end_layout

\begin_layout Standard
If the Cover Text requirement of section 3 is applicable to these copies
 of the Document, then if the Document is less than one half of the entire
 aggregate, the Document's Cover Texts may be placed on covers that bracket
 the Document within the aggregate, or the electronic equivalent of covers
 if the Document is in electronic form.
 Otherwise they must appear on printed covers that bracket the whole aggregate.
\end_layout

\begin_layout Standard
8.
 TRANSLATION
\end_layout

\begin_layout Standard
Translation is considered a kind of modification, so you may distribute
 translations of the Document under the terms of section 4.
 Replacing Invariant Sections with translations requires special permission
 from their copyright holders, but you may include translations of some
 or all Invariant Sections in addition to the original versions of these
 Invariant Sections.
 You may include a translation of this License, and all the license notices
 in the Document, and any Warranty Disclaimers, provided that you also include
 the original English version of this License and the original versions
 of those notices and disclaimers.
 In case of a disagreement between the translation and the original version
 of this License or a notice or disclaimer, the original version will prevail.
\end_layout

\begin_layout Standard
If a section in the Document is Entitled "Acknowledgements", "Dedications",
 or "History", the requirement (section 4) to Preserve its Title (section
 1) will typically require changing the actual title.
\end_layout

\begin_layout Standard
9.
 TERMINATION
\end_layout

\begin_layout Standard
You may not copy, modify, sublicense, or distribute the Document except
 as expressly provided under this License.
 Any attempt otherwise to copy, modify, sublicense, or distribute it is
 void, and will automatically terminate your rights under this License.
\end_layout

\begin_layout Standard
However, if you cease all violation of this License, then your license from
 a particular copyright holder is reinstated (a) provisionally, unless and
 until the copyright holder explicitly and finally terminates your license,
 and (b) permanently, if the copyright holder fails to notify you of the
 violation by some reasonable means prior to 60 days after the cessation.
\end_layout

\begin_layout Standard
Moreover, your license from a particular copyright holder is reinstated
 permanently if the copyright holder notifies you of the violation by some
 reasonable means, this is the first time you have received notice of violation
 of this License (for any work) from that copyright holder, and you cure
 the violation prior to 30 days after your receipt of the notice.
\end_layout

\begin_layout Standard
Termination of your rights under this section does not terminate the licenses
 of parties who have received copies or rights from you under this License.
 If your rights have been terminated and not permanently reinstated, receipt
 of a copy of some or all of the same material does not give you any rights
 to use it.
\end_layout

\begin_layout Standard
10.
 FUTURE REVISIONS OF THIS LICENSE
\end_layout

\begin_layout Standard
The Free Software Foundation may publish new, revised versions of the GNU
 Free Documentation License from time to time.
 Such new versions will be similar in spirit to the present version, but
 may differ in detail to address new problems or concerns.
 See http://www.gnu.org/copyleft/.
\end_layout

\begin_layout Standard
Each version of the License is given a distinguishing version number.
 If the Document specifies that a particular numbered version of this License
 "or any later version" applies to it, you have the option of following
 the terms and conditions either of that specified version or of any later
 version that has been published (not as a draft) by the Free Software Foundatio
n.
 If the Document does not specify a version number of this License, you
 may choose any version ever published (not as a draft) by the Free Software
 Foundation.
 If the Document specifies that a proxy can decide which future versions
 of this License can be used, that proxy's public statement of acceptance
 of a version permanently authorizes you to choose that version for the
 Document.
\end_layout

\begin_layout Standard
11.
 RELICENSING
\end_layout

\begin_layout Standard
"Massive Multiauthor Collaboration Site" (or "MMC Site") means any World
 Wide Web server that publishes copyrightable works and also provides prominent
 facilities for anybody to edit those works.
 A public wiki that anybody can edit is an example of such a server.
 A "Massive Multiauthor Collaboration" (or "MMC") contained in the site
 means any set of copyrightable works thus published on the MMC site.
\end_layout

\begin_layout Standard
"CC-BY-SA" means the Creative Commons Attribution-Share Alike 3.0 license
 published by Creative Commons Corporation, a not-for-profit corporation
 with a principal place of business in San Francisco, California, as well
 as future copyleft versions of that license published by that same organization.
\end_layout

\begin_layout Standard
"Incorporate" means to publish or republish a Document, in whole or in part,
 as part of another Document.
\end_layout

\begin_layout Standard
An MMC is "eligible for relicensing" if it is licensed under this License,
 and if all works that were first published under this License somewhere
 other than this MMC, and subsequently incorporated in whole or in part
 into the MMC, (1) had no cover texts or invariant sections, and (2) were
 thus incorporated prior to November 1, 2008.
\end_layout

\begin_layout Standard
The operator of an MMC Site may republish an MMC contained in the site under
 CC-BY-SA on the same site at any time before August 1, 2009, provided the
 MMC is eligible for relicensing.
\end_layout

\begin_layout Standard
ADDENDUM: How to use this License for your documents
\end_layout

\begin_layout Standard
To use this License in a document you have written, include a copy of the
 License in the document and put the following copyright and license notices
 just after the title page:
\end_layout

\begin_layout Standard
Copyright (c) YEAR YOUR NAME.
 Permission is granted to copy, distribute and/or modify this document under
 the terms of the GNU Free Documentation License, Version 1.3 or any later
 version published by the Free Software Foundation; with no Invariant Sections,
 no Front-Cover Texts, and no Back-Cover Texts.
 A copy of the license is included in the section entitled "GNU Free Documentati
on License".
\end_layout

\begin_layout Standard
If you have Invariant Sections, Front-Cover Texts and Back-Cover Texts,
 replace the "with...Texts." line with this:
\end_layout

\begin_layout Standard
with the Invariant Sections being LIST THEIR TITLES, with the Front-Cover
 Texts being LIST, and with the Back-Cover Texts being LIST.
\end_layout

\begin_layout Standard
If you have Invariant Sections without Cover Texts, or some other combination
 of the three, merge those two alternatives to suit the situation.
\end_layout

\begin_layout Standard
If your document contains nontrivial examples of program code, we recommend
 releasing these examples in parallel under your choice of free software
 license, such as the GNU General Public License, to permit their use in
 free software.

\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Costa et al.(2020)"
key "costa2020"
literal "false"

\end_inset

Costa, D., Shook, K., Spence, C., Elliott, J., Baulch, H., Wilson, H., Pomeroy,
 J., (2020).
 Predicting variable contributing areas, hydrological connectivity, and
 solute transport pathways for a Canadian Prairie basin.
 Water Resources Research (2020), 2020WR027984.
 https://doi.org/10.1029/2020WR027984
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Garbrecht and Martz(1997)"
key "garbrecht1007"
literal "true"

\end_inset

Garbrecht, J., and L.
 W.
 Martz (1997), The assignment of drainage direction over flat surfaces in
 raster digital elevation models, J.
 Hydrol., 193(1-4), 204–213, doi:10.1016/S0022-1694(96)03138-1.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "GDAL/OGR contributors(2020)"
key "gdal2020"
literal "false"

\end_inset

GDAL/OGR contributors (2020).
 GDAL/OGR Geospatial Data Abstraction software Library.
 Open Source Geospatial Foundation.
 URL https://gdal.org.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Granger et al.(1984)"
key "granger1984"
literal "true"

\end_inset

Granger, R.
 J., D.
 M.
 Gray, and G.
 E.
 Dyck (1984), Snowmelt Infiltration to frozen Prairie Soils, Can.
 J.
 Earth Sci., 21(6), 669–677, doi:10.1016/0148-9062(85)92399-X.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Lindsay, J.B.(2016)"
key "lindsay2016"
literal "false"

\end_inset

 The practice of DEM stream burning revisited.
 Earth Surface Processes and Landforms 41, 658–668.
 https://doi.org/10.1002/esp.3888
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Pomeroy et al.(2007)"
key "pomeroy2007"
literal "true"

\end_inset

Pomeroy, J.
 W., D.
 M.
 Gray, T.
 Brown, N.
 R.
 Hedstrom, W.
 L.
 Quinton, R.
 J.
 Granger, and S.
 K.
 Carey (2007), The cold regions hydrological model: a platform for basing
 process representation and model structure on physical evidence, Hydrol.
 Process., 21(19), 2650–2667, doi:10.1002/hyp.6787.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Shapiro and Westervelt(1992)"
key "shapiro"
literal "true"

\end_inset

Shapiro, M., and J.
 Westervelt (1992), R.MAPCALC.
 An Algebra for GIS and Image Processing.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Shook and Pomeroy(2011)"
key "shook2011"
literal "true"

\end_inset

Shook, K.
 R., and J.
 W.
 Pomeroy (2011), Memory effects of depressional storage in Northern Prairie
 hydrology, Hydrol.
 Process., 25(25), 3890–3898, doi:10.1002/hyp.8381.
\end_layout

\begin_layout Bibliography
\begin_inset CommandInset bibitem
LatexCommand bibitem
label "Shook et al.(2013)"
key "shook2013"
literal "true"

\end_inset

Shook, K., J.
 W.
 Pomeroy, C.
 Spence, and L.
 Boychuk (2013), Storage dynamics simulations in Prairie wetland hydrology
 models: evaluation and parameterization, Hydrol.
 Process., 27(13), 1875–1889, doi:10.1002/hyp.9867.
\begin_inset Newpage newpage
\end_inset


\end_layout

\begin_layout Standard
\begin_inset CommandInset index_print
LatexCommand printindex
type "idx"
name "Index"
literal "true"

\end_inset


\end_layout

\end_body
\end_document
